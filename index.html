<!-- 
  =============================================================================================
  PROYEK: IRMINSUL ARCHIVES (WEBSITE LORE GENSHIN IMPACT)
  VERSI: 19 (FINAL SYNCED EDITION)
  
  CHANGELOG:
  1. Sinkronisasi total teks Bahasa Inggris agar setara detailnya dengan Bahasa Indonesia.
  2. Memastikan istilah-istilah lore (seperti "Shades", "Sovereigns", "Gnosis") konsisten.
  
  CARA MENGEDIT:
  Cari variabel 'loreData' di bagian bawah script untuk mengubah teks.
  =============================================================================================
-->

<!DOCTYPE html>
<html lang="id" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- JUDUL TAB BROWSER -->
    <title>Irminsul Archives: Kronik Teyvat Lengkap</title>
    <link rel="icon" type="image/x-icon" href="https://upload.wikimedia.org/wikipedia/commons/5/5d/Genshin_Impact_logo.svg">

    <!-- LIBRARY EKSTERNAL -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
    <link href="https://fonts.googleapis.com/css2?family=Marcellus&family=Nunito+Sans:wght@300;400;600;700;800&display=swap" rel="stylesheet">

    <!-- KONFIGURASI TEMA -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        lore: {
                            gold: '#C6A668',       
                            goldDim: '#8A7342',    
                            paper: '#Fdfbf7',      
                            void: '#0F111A',       
                            voidLight: '#1E2235',  
                            accent: '#759BFF',     
                            mystery: '#3730a3',    
                            mysteryHover: '#4338ca' 
                        },
                        el: {
                            anemo: '#72e2c3', geo: '#e3b342', electro: '#d094ea', 
                            dendro: '#a5d63f', hydro: '#4cc2f1', pyro: '#ff7e5f', 
                            cryo: '#a0e9ff', abyss: '#9c7af2', 
                            lunar: '#E2E8F0' // Warna Putih Bulan
                        }
                    },
                    fontFamily: {
                        serif: ['Marcellus', 'serif'],
                        sans: ['Nunito Sans', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body { transition: background-color 0.5s ease, color 0.5s ease; }
        
        @media (max-width: 768px) {
        body {
            padding-bottom: 96px; /* ruang untuk mobile nav */
        }
        }

        @supports (padding-bottom: env(safe-area-inset-bottom)) {
        body {
            padding-bottom: calc(96px + env(safe-area-inset-bottom));
        }
        }
       
        /* Subtle Accent Pulse */
        @keyframes pulse-gold {
        0%, 100% {
            box-shadow: 0 0 0 0 rgba(198,166,104, 0.35);
        }
        50% {
            box-shadow: 0 0 0 6px rgba(198,166,104, 0);
        }
        }

        .timeline-node {
        animation: pulse-gold 3.5s ease-in-out infinite;
        }

        .timeline-item:hover .timeline-node {
        animation: none;
        }

        @keyframes divider-glow {
        0%, 100% { opacity: 0.6; }
        50% { opacity: 1; }
        }

        .royal-divider {
            height: 1px;        /* Tetap tipis elegan */
            width: 100%;        /* Lebar penuh mengikuti container parent */
            max-width: 400px;   /* Kita pendekkan sedikit biar lebih fokus ke teks */
            /* Gradasi baru: Solid di tengah (40%-60%), pudar di ujung */
            background: linear-gradient(90deg, transparent 0%, #C6A668 40%, #C6A668 60%, transparent 100%);
            margin: 0 auto;     /* Posisi tengah */
            opacity: 1;         /* HAPUS transparan biar tajam */
            border: none;       /* Pastikan tidak ada border bawaan */
        }

        /* Subtle lift & glow */
        .glass:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 24px rgba(0,0,0,.12);
        }
        .dark .glass:hover {
        box-shadow: 0 12px 28px rgba(0,0,0,.45);
        }

        .nav-btn.active {
        outline: 2px solid rgba(198,166,104,.35);
        outline-offset: 2px;
        }


        /* Glassmorphism */
        .glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .dark .glass {
            background: rgba(20, 24, 40, 0.75);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
        }

        /* Hover Card */
        .nation-card:hover {
            transform: translateY(-8px) scale(1.02);
            z-index: 10;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .dark .nation-card:hover {
            box-shadow: 0 20px 25px -5px rgba(255, 255, 255, 0.05);
        }

        /* Border Overrides */
        .dark .border-thick-gold { border-left-color: #C6A668 !important; border-left-width: 4px; }
        .dark .border-thick-accent { border-left-color: #759BFF !important; border-left-width: 4px; }
        .dark .border-thick-dim { border-left-color: #8A7342 !important; border-left-width: 4px; }
        .dark .border-bottom-mystery { border-bottom-color: #3730a3 !important; border-bottom-width: 4px; }

        /* Timeline Connector */
        
        /* === PERBAIKAN TIMELINE (RESET & SIMPLE) === */
        
        /* 1. Item Timeline */
        .timeline-item {
            position: relative;
            padding-left: 3rem;   /* Ruang untuk garis di kiri */
            padding-bottom: 3rem; /* INI KUNCINYA: Jarak antar item pakai padding, bukan margin */
        }
        
        /* 2. Garis Konektor (Tiang) */
        .timeline-connector {
            position: absolute;
            left: 0.95rem;        /* Posisi tengah node */
            top: 1rem;            /* Mulai dari tengah node */
            bottom: 0;            /* Memanjang sampai ujung bawah item (termasuk padding) */
            width: 2px;
            background: linear-gradient(to bottom, #C6A668 50%, rgba(198, 166, 104, 0.1));
            z-index: 0;
        }
        .dark .timeline-connector {
            background: linear-gradient(to bottom, #8A7342 50%, rgba(138, 115, 66, 0.1));
        }
        /* Sembunyikan garis di item terakhir */
        .timeline-item:last-child .timeline-connector {
            display: none; 
        }

        /* 3. Node (Bulatan) */
        .timeline-node {
            position: absolute;
            left: 0.35rem;        /* Center align dengan garis */
            top: 0;               /* Sejajar dengan bagian atas kartu */
            width: 1.4rem;
            height: 1.4rem;
            border-radius: 50%;
            background-color: #Fdfbf7;
            border: 3px solid #C6A668;
            z-index: 10;
            transition: all 0.3s ease;
        }
        .dark .timeline-node {
            background-color: #0F111A;
            border-color: #8A7342;
        }

        /* --- STATE AKTIF (SOLID GOLD) --- */
        .timeline-node.active {
            background-color: #C6A668 !important; /* Isi Emas Penuh */
            border-color: #C6A668 !important;     /* Border jadi Emas juga (Solid) */
            transform: scale(1.35);               /* Perbesar 35% biar mencolok */
            box-shadow: 0 0 0 5px rgba(198, 166, 104, 0.25); /* Ring tipis di luar */
            z-index: 50;                          /* Pastikan dia di atas segalanya */
        }
        
        /* Versi Dark Mode (Biar tetap menyala) */
        .dark .timeline-node.active {
            background-color: #C6A668 !important;
            border-color: #C6A668 !important;
            box-shadow: 0 0 0 5px rgba(255, 255, 255, 0.1); /* Ring putih tipis di mode gelap */
        }

        .dark .timeline-connector {
            background: linear-gradient(to bottom, #8A7342 0%, rgba(138, 115, 66, 0.3) 100%);
        }

        .dark .timeline-node {
            background-color: #0F111A;
            box-shadow: 0 0 0 4px rgba(15, 17, 26, 0.8);
            border-color: #C6A668;
        }
        .glass:hover + .timeline-node, .glass:hover ~ .timeline-node { 
            transform: scale(1.1);
            background-color: #C6A668;
        }

        /* Watermark */
        .card-watermark {
            position: absolute;
            right: -10px;
            bottom: -20px;
            font-size: 6rem;
            opacity: 0.05;
            pointer-events: none;
            transform: rotate(-15deg);
            transition: transform 0.5s ease;
        }
        .glass:hover .card-watermark {
            transform: rotate(0deg) scale(1.1);
            opacity: 0.1;
        }
        .dark .card-watermark { opacity: 0.05; color: white; }

        /* Accordion */
        .expandable-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0, 1, 0, 1);
        }
        .expandable-content.open {
            max-height: 2000px;
            transition: max-height 0.6s ease-in-out;
        }

        /* Animation & Scrollbar */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-enter { animation: fadeIn 0.4s ease-out forwards; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #8A7342; border-radius: 10px; }
        
        .royal-divider {
            height: 1px;
            width: 80%;
            max-width: 600px;
            background: linear-gradient(90deg, transparent 0%, #C6A668 50%, transparent 100%);
            margin: 0 auto;
            opacity: 0.8;
        }

        /* === BACKGROUND PARTICLES (ATMOSPHERE) === */
        #particles-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Biar bisa diklik tembus */
            z-index: -1; /* Di belakang segalanya */
            overflow: hidden;
        }

        .particle {
            position: absolute;
            bottom: -10px;
            /* Ganti 0.8 jadi 0.4 agar lebih transparan/tipis */
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, rgba(198,166,104,0) 70%);
            border-radius: 50%;
            opacity: 0;
            animation: floatUp linear infinite;
        }

        .dark .particle {
            /* Ganti 0.8 jadi 0.4 juga */
            background: radial-gradient(circle, rgba(129,140,248,0.2) 0%, rgba(30,58,138,0) 70%);
        }

        @keyframes floatUp {
            0% {
                transform: translateY(0) scale(0.5);
                opacity: 0;
            }
            20% {
                opacity: 0.3; /* SEBELUMNYA 0.6 -> Turunkan jadi 0.3 agar lebih tipis */
            }
            80% {
                opacity: 0.15; /* SEBELUMNYA 0.4 -> Turunkan jadi 0.15 agar nyaris hilang */
            }
            100% {
                transform: translateY(-120vh) scale(1);
                opacity: 0;
            }
        }
        
        /* === BACKGROUND PATTERN (GRID & VIGNETTE) === */
        #bg-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2; /* Pastikan di belakang PARTIKEL (-1) */
            pointer-events: none;
        }

        /* Membuat garis kotak-kotak tipis */
        .grid-pattern {
            width: 100%;
            height: 100%;
            /* Garis Horizontal & Vertikal */
            background-image: 
                linear-gradient(rgba(198, 166, 104, 0.07) 1px, transparent 1px),
                linear-gradient(90deg, rgba(198, 166, 104, 0.01) 1px, transparent 1px);
            background-size: 25px 25px; /* Ukuran kotak 25px */
            
            /* Masking: Agar grid hanya terlihat di tengah dan pudar di pinggir */
            -webkit-mask-image: radial-gradient(circle at center, black 30%, transparent 100%);
            mask-image: radial-gradient(circle at center, black 30%, transparent 100%);
        }

        /* Dark Mode: Garis lebih tipis & warna biru/ungu misterius */
        .dark .grid-pattern {
            background-image: 
                linear-gradient(rgba(129, 140, 248, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(129, 140, 248, 0.02) 1px, transparent 1px);
        }
        
    </style>
</head>
<body class="bg-[#F2EFE9] dark:bg-lore-void text-gray-800 dark:text-gray-200 min-h-screen flex flex-col font-sans selection:bg-lore-gold selection:text-white">

    <div id="bg-pattern">
        <div class="grid-pattern"></div>
    </div>

    <div id="particles-container"></div>

    <!-- SPOILER NOTICE -->
<div id="spoiler-banner"
     class="fixed bottom-20 right-4 z-50 glass px-4 py-3 rounded-lg text-xs shadow-lg max-w-xs">
  <p class="mb-2">
    ‚ö†Ô∏è This site contains <strong>heavy story spoilers</strong>.
  </p>
  <button onclick="document.getElementById('spoiler-banner').remove()"
    class="mt-1 px-3 py-1 bg-lore-gold text-white rounded text-xs font-bold">
    I Understand
  </button>
</div>

    <!-- HEADER -->
    <header class="fixed top-0 w-full z-50 glass transition-all duration-300 border-b border-lore-gold/10">
        <div class="max-w-7xl mx-auto px-4 h-16 flex items-center justify-between">
            <!-- Brand -->
            <div class="flex items-center gap-3 cursor-pointer group" onclick="app.nav('home')">
                <div class="w-9 h-9 rounded-full bg-gradient-to-br from-lore-gold to-[#8A7342] flex items-center justify-center shadow-lg ring-2 ring-white/50 dark:ring-white/10">
                    <span class="text-white font-serif font-bold text-xl">I</span>
                </div>
                <div class="flex flex-col justify-center">
                    <h1 class="font-serif font-bold text-lg tracking-[0.15em] text-gray-800 dark:text-white uppercase leading-none">Irminsul</h1>
                    <span class="text-[0.6rem] text-lore-goldDim uppercase tracking-widest font-bold mt-0.5">Record of Teyvat</span>
                </div>
            </div>

            <!-- Desktop Nav -->
            <nav class="hidden md:flex items-center gap-2 bg-black/5 dark:bg-white/5 p-1 rounded-full backdrop-blur-md">
                <button onclick="app.nav('timeline')" class="nav-btn px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-widest transition-all duration-300" data-id="nav_timeline">Kronologi</button>
                <button onclick="app.nav('nations')" class="nav-btn px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-widest transition-all duration-300" data-id="nav_nations">Wilayah</button>
                <button onclick="app.nav('library')" class="nav-btn px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-widest transition-all duration-300" data-id="nav_library">Pustaka</button>
                <button onclick="app.nav('cosmology')" class="nav-btn px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-widest transition-all duration-300" data-id="nav_cosmology">Kosmologi</button>
                <button onclick="app.nav('theories')" class="nav-btn px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-widest transition-all duration-300" data-id="nav_theories">Ramalan</button>
            </nav>

            <!-- Controls -->
            <div class="flex items-center gap-3">

                <!-- Simple Search -->
                <input
                id="simple-search"
                type="text"
                placeholder="Cari di Irminsul..."
                class="hidden md:block bg-black/5 dark:bg-white/5 
                        rounded-full px-4 py-1.5 text-xs 
                        text-gray-700 dark:text-gray-200 
                        outline-none w-48"
                />

                <button onclick="app.toggleLang()" class="px-3 py-1 rounded glass hover:border-lore-gold transition-all text-xs font-bold shadow-sm">
                    <span id="lang-indicator">ID</span>
                </button>
                <button onclick="app.toggleTheme()" class="w-8 h-8 rounded-full glass hover:bg-lore-voidLight hover:text-white transition-all flex items-center justify-center text-sm shadow-sm">
                    <span id="theme-icon">‚òæ</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Hero -->
    <div class="pt-24 pb-4 px-4 text-center relative z-10"> <h2 id="page-title" class="text-3xl md:text-5xl font-serif font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-lore-goldDim via-lore-gold to-lore-goldDim animate-enter">
            Arsip Irminsul
        </h2>

        <div class="max-w-xl mx-auto">
            <div class="royal-divider"></div>

            <p id="page-subtitle"
               class="text-gray-500 dark:text-gray-400 font-serif italic text-sm md:text-base animate-enter py-3 leading-none"
               style="animation-delay: 0.1s;">
                "Akses data rahasia."
            </p>

            <div class="royal-divider"></div>
        </div>

    </div>

    <!-- Content -->
    <main id="app-content" class="flex-grow w-full max-w-5xl mx-auto px-4 sm:px-6 pb-24 space-y-8"></main>

    <!-- Mobile Nav -->
    <div class="md:hidden fixed bottom-4 left-4 right-4 h-16 glass rounded-2xl flex justify-between items-center z-50 shadow-2xl border border-white/20 dark:border-white/10 p-1.5 gap-1">
        
        <button id="mobile-nav-timeline" onclick="app.nav('timeline')" class="mobile-nav-btn flex flex-col items-center justify-center w-full h-full text-gray-500 transition-all duration-300">
            <span class="text-xl">‚è≥</span>
        </button>
        
        <button id="mobile-nav-nations" onclick="app.nav('nations')" class="mobile-nav-btn flex flex-col items-center justify-center w-full h-full text-gray-500 transition-all duration-300">
            <span class="text-xl">üåç</span>
        </button>

        <button id="mobile-nav-library" onclick="app.nav('library')" class="mobile-nav-btn flex flex-col items-center justify-center w-full h-full text-gray-500 transition-all duration-300">
            <span class="text-xl">üìö</span>
        </button>

        <button id="mobile-nav-cosmology" onclick="app.nav('cosmology')" class="mobile-nav-btn flex flex-col items-center justify-center w-full h-full text-gray-500 transition-all duration-300">
            <span class="text-xl">üåå</span>
        </button>

        <button id="mobile-nav-theories" onclick="app.nav('theories')" class="mobile-nav-btn flex flex-col items-center justify-center w-full h-full text-gray-500 transition-all duration-300">
            <span class="text-xl">üîÆ</span>
        </button>

        <button onclick="app.openMobileSearch()" class="flex flex-col items-center justify-center w-full h-full text-gray-500 hover:text-lore-gold transition-colors">
            <span class="text-xl">üîç</span>
        </button>

    </div>

    <!-- Script -->
    <script>
        const PREF_KEY = 'irminsul_pref';
        const db = {
            id: {
                // UPDATE: Menambahkan 'library'
                nav: { timeline: "Kronologi", nations: "Wilayah & Faksi", library: "Pustaka", cosmology: "Kosmologi", theories: "Ramalan" },
                titles: { timeline: "Garis Waktu Teyvat", nations: "Geopolitik & Faksi", library: "Arsip & Relik Kuno", cosmology: "Hukum & Struktur Dunia", theories: "Ramalan & Teori Fans", home: "Terminal Irminsul Online" },
                subtitles: { timeline: "Dari Era Naga hingga Era Luna III.", nations: "Tujuh Bangsa dan Organisasi Non-Teritorial.", library: "Buku terlarang dan memori artefak.", cosmology: "Langit Palsu, Lautan Gelap, dan Tiga Alam.", theories: "Analisis Masa Depan dan Kebenaran Tersembunyi.", home: "Akses data rahasia." },
                ui: { read_more: "Lihat Detail", collapse: "Tutup", archon: "Archon", leader: "Pemimpin/Faksi", status: "Status", warning: " PERINGATAN: Mengandung Spoiler Berat & Spekulasi " }
            },
            en: {
                // UPDATE: Adding 'library'
                nav: { timeline: "Timeline", nations: "Regions & Factions", library: "Archives", cosmology: "Cosmology", theories: "Prophecy" },
                titles: { timeline: "Timeline of Teyvat", nations: "Geopolitics & Factions", library: "Ancient Relics & Archives", cosmology: "World Laws & Structure", theories: "Prophecy & Fan Theories", home: "Irminsul Terminal Online" },
                subtitles: { timeline: "From Dragon Era to Luna III Era.", nations: "The Seven Nations and Non-Territorial Organizations.", library: "Forbidden books and artifact memories.", cosmology: "False Sky, Dark Sea, and Natural Laws.", theories: "Future analysis and hidden truths.", home: "Access classified data." },
                ui: { read_more: "View Details", collapse: "Collapse", archon: "Archon", leader: "Leader/Faction", status: "Status", warning: "WARNING: Contains Heavy Spoilers & Speculation" }
            }
        };

        const loreData = {
            
            // == KRONOLOGI LENGKAP (ULTRA DETAILED - DIRECTOR'S CUT) ==
            timeline: [
                // --- EPOCH 1: PRIMORDIAL CHAOS ---
                {
                    era_id: "Era Vishap: Siklus Murni", era_en: "Vishap Era: The Pure Cycle", year: "Pre-Genesis", icon: "üêâ",
                    desc_id: "Teyvat sebagai 'Alam Cahaya' di bawah kekuasaan Tujuh Raja Naga.",
                    desc_en: "Teyvat as the 'Light Realm' under the Seven Dragon Sovereigns.",
                    details_id: [
                        "**Mikrokosmos:** Teyvat belum memiliki batas. Elemen mengalir liar dari Lautan Kuantum (Sea of Quanta).",
                        "**Raja Nibelung:** Naga Nibelung menguasai dunia. Ia menolak peringatan dari 'The Voyager' (Descender Ke-2) tentang ancaman kosmik.",
                        "**Penciptaan Awal:** Untuk menjaga stabilitas elemen, Nibelung menciptakan tiga entitas astral (Bulan) sebagai jangkar realitas."
                    ],
                    details_en: [
                        "**Microcosm:** Teyvat had no boundaries. Elements flowed wildly from the Sea of Quanta.",
                        "**King Nibelung:** Dragon Nibelung ruled. He rejected warnings from 'The Voyager' (2nd Descender) about cosmic threats.",
                        "**Early Creation:** To stabilize elements, Nibelung created three astral entities (Moons) as anchors of reality."
                    ]
                },
                {
                    era_id: "Kedatangan Phanes: The First War", era_en: "Arrival of Phanes: The First War", year: "Genesis", icon: "üïäÔ∏è",
                    desc_id: "Invasi Takhta Pertama & Pembentukan Langit Palsu.",
                    desc_en: "Invasion of the First Throne & Formation of False Sky.",
                    details_id: [
                        "**Perang 40 Tahun:** Phanes (Descender 1) dan 4 Bayangannya (Istaroth, Asmoday, dll) membantai ras Naga. Nibelung melarikan diri ke Void.",
                        "**The Firmament:** Phanes menciptakan 'Cangkang Telur' (Langit Palsu) untuk memisahkan Teyvat dari alam semesta asli dan memblokir kekuatan Naga.",
                        "**Era Ark:** Phanes menciptakan manusia pertama. Peradaban terpadu dimulai, dibimbing oleh utusan langit (Seelie)."
                    ],
                    details_en: [
                        "**40-Year War:** Phanes (Descender 1) and 4 Shades (Istaroth, Asmoday, etc) slaughtered the Dragons. Nibelung fled to the Void.",
                        "**The Firmament:** Phanes created the 'Eggshell' (False Sky) to separate Teyvat from the real universe and block Dragon power.",
                        "**Ark Era:** Phanes created the first humans. Unified civilization began, guided by celestial envoys (Seelie)."
                    ]
                },

                // --- EPOCH 2: LUNA & SEELIE (THE GOLDEN AGE) ---
                {
                    era_id: "Era Tiga Bulan (Hyperborea)", era_en: "Era of Three Moons (Hyperborea)", year: "Golden Age", icon: "üåï",
                    desc_id: "Puncak peradaban kuno di bawah cahaya Aria, Sonnet, dan Canon.",
                    desc_en: "Peak of ancient civilization under the light of Aria, Sonnet, and Canon.",
                    details_id: [
                        "**Hyperborea:** Peradaban utara (leluhur Snezhnaya/Nod-Krai) yang menyembah Tiga Bulan. Mereka hidup abadi tanpa mengenal kematian.",
                        "**Pernikahan Terlarang:** Koitar (Malaikat Fajar/Seelie) jatuh cinta pada manusia (reinkarnasi Seutervoinen). Ini melanggar hukum Phanes.",
                        "**Tari Hexerei:** Para penyihir awal (proto-Hexenzirkel) mulai mempelajari sihir bulan untuk menentang takdir langit."
                    ],
                    details_en: [
                        "**Hyperborea:** Northern civilization (ancestors of Snezhnaya/Nod-Krai) worshipping the Three Moons. They lived eternally without death.",
                        "**Forbidden Marriage:** Koitar (Dawn Angel/Seelie) fell in love with a human (Seutervoinen reincarnation). This violated Phanes' law.",
                        "**Dance of Hexerei:** Early witches (proto-Hexenzirkel) began studying moon magic to defy celestial fate."
                    ]
                },
                {
                    era_id: "Perang Takhta Kedua (The Funerals)", era_en: "War of the Second Throne (The Funerals)", year: "Cataclysm I", icon: "üåë",
                    desc_id: "Nibelung kembali membawa Abyss. Kematian Bulan & Saarelainen.",
                    desc_en: "Nibelung returns with Abyss. Death of Moons & Saarelainen.",
                    details_id: [
                        "**Invasi Abyss:** Nibelung kembali dengan 'Pengetahuan Terlarang'. Perang menghancurkan daratan, Enkanomiya tenggelam.",
                        "**Kematian Bulan:** Dalam kekacauan, Saudari Bulan saling membunuh. Aria & Sonnet hancur menjadi debu. Canon (Frost Moon) tertidur/dormant.",
                        "**Tragedi Saarelainen:** Descender Ke-3 (Saarelainen) mencoba menengahi tapi dibunuh. Tulang-tulangnya dimutilasi Phanes menjadi 7 Gnosis (Jantung Dewa).",
                        "**Kutukan:** Ras Seelie kehilangan bentuk fisik. Manusia kehilangan keabadian."
                    ],
                    details_en: [
                        "**Abyss Invasion:** Nibelung returned with 'Forbidden Knowledge'. War shattered the land, Enkanomiya sank.",
                        "**Death of Moons:** In chaos, Moon Sisters killed each other. Aria & Sonnet turned to dust. Canon (Frost Moon) fell dormant.",
                        "**Tragedy of Saarelainen:** 3rd Descender (Saarelainen) tried to mediate but was killed. His bones were mutilated by Phanes into 7 Gnoses.",
                        "**The Curse:** Seelie race lost physical forms. Humans lost immortality."
                    ]
                },

                // --- EPOCH 3: THE ARCHON WAR (SELECTION) ---
                {
                    era_id: "Perang Archon: Perebutan Gnosis", era_en: "Archon War: Battle for Gnosis", year: "3700-2000 BP", icon: "‚öîÔ∏è",
                    desc_id: "Celestia membuka 'Kursi Ilahi' untuk menstabilkan dunia yang retak.",
                    desc_en: "Celestia opens 'Divine Seats' to stabilize the fractured world.",
                    details_id: [
                        "**Aturan:** Hanya 7 pemenang yang berhak memegang Gnosis (Sisa tubuh Saarelainen) untuk beresonansi dengan Celestia.",
                        "**Liyue (Guili):** Guizhong tewas di Lembah Guili. Morax terpaksa menyegel banyak dewa tua (Osial, Chi) di dasar laut.",
                        "**Mondstadt:** Pemberontakan Barbatos & Amos menjatuhkan Decarabian. Andrius memilih mati agar angin utara tidak membekukan rakyat.",
                        "**Sumeru:** Raja Deshret menolak Gnosis, memilih jalur terlarang Abyss bersama Nabu Malikata, berujung pada kegilaannya."
                    ],
                    details_en: [
                        "**The Rule:** Only 7 victors could hold a Gnosis (Remains of Saarelainen) to resonate with Celestia.",
                        "**Liyue (Guili):** Guizhong died in Guili. Morax was forced to seal many old gods (Osial, Chi) under the sea.",
                        "**Mondstadt:** Barbatos & Amos rebellion toppled Decarabian. Andrius chose death so northern winds wouldn't freeze the people.",
                        "**Sumeru:** King Deshret rejected Gnosis, choosing the forbidden Abyss path with Nabu Malikata, leading to his madness."
                    ]
                },
                {
                    era_id: "Era Tujuh Archon (The Seven)", era_en: "Era of The Seven", year: "2000-500 BP", icon: "üèõÔ∏è",
                    desc_id: "Teyvat dibentuk ulang menjadi 7 Bangsa di bawah Prinsip Surgawi.",
                    desc_en: "Teyvat reshaped into 7 Nations under Heavenly Principles.",
                    details_id: [
                        "**Struktur:** Archon bertugas memfilter energi elemen dan memberikan Vision kepada manusia terpilih (Allogenes).",
                        "**Khaenri'ah:** Bangsa tanpa dewa didirikan di bawah tanah oleh Dainsleif dan Pierro, menolak kekuasaan Celestia.",
                        "**Egeria:** Egeria (Hydro Archon) menciptakan manusia baru menggunakan Air Primordial untuk menggantikan ras kuno Fontaine."
                    ],
                    details_en: [
                        "**Structure:** Archons filter elemental energy and grant Visions to chosen humans (Allogenes).",
                        "**Khaenri'ah:** Godless nation founded underground by Dainsleif and Pierro, rejecting Celestia's rule.",
                        "**Egeria:** Egeria (Hydro Archon) created new humans using Primordial Water to replace Fontaine's ancient race."
                    ]
                },

                // --- EPOCH 4: THE ECLIPSE (CATACLYSM II) ---
                {
                    era_id: "Bencana Khaenri'ah (The Eclipse)", era_en: "The Cataclysm (The Eclipse)", year: "500 BP", icon: "üî•",
                    desc_id: "Pemberontakan 'Pendosa' dan Runtuhnya Tatanan Dunia.",
                    desc_en: "Rebellion of 'Sinners' and Collapse of World Order.",
                    details_id: [
                        "**Lima Pendosa:** Rhinedottir (Gold), Rerir, Hroptatyr, Surtalogi, dan Vedrfolnir membuka gerbang Abyss untuk mencapai 'Transendensi'.",
                        "**Langit Hitam:** Monster Abyss membanjiri Teyvat. Durin menyerang Mondstadt, Elynas menyerang Fontaine.",
                        "**Kematian Archon:** Makoto tewas di Khaenri'ah. Rukkhadevata terkontaminasi dan harus bereinkarnasi. Egeria tewas di Tunigi Hollow.",
                        "**Kutukan Abadi:** Celestia menjatuhkan paku. Darah murni Khaenri'ah dikutuk hidup abadi (Immortality), darah campuran jadi Hilichurl."
                    ],
                    details_en: [
                        "**Five Sinners:** Rhinedottir (Gold), Rerir, Hroptatyr, Surtalogi, and Vedrfolnir opened Abyss gates to achieve 'Transcendence'.",
                        "**Black Sky:** Abyss monsters flooded Teyvat. Durin attacked Mondstadt, Elynas attacked Fontaine.",
                        "**Archon Deaths:** Makoto died in Khaenri'ah. Rukkhadevata corrupted and reincarnated. Egeria died at Tunigi Hollow.",
                        "**Eternal Curse:** Celestia dropped nails. Pure bloods cursed with immortality, mixed bloods became Hilichurls."
                    ]
                },

                // --- EPOCH 5: TRAVELER'S JOURNEY (PRESENT) ---
                {
                    era_id: "Traveler: Prologue - Act III (Inazuma)", era_en: "Traveler: Prologue - Act III (Inazuma)", year: "Year 1-3", icon: "‚öñÔ∏è",
                    desc_id: "Awal perjalanan. Gnosis mulai dikumpulkan Fatui.",
                    desc_en: "Journey begins. Fatui starts collecting Gnoses.",
                    details_id: [
                        "**Mondstadt:** Venti membiarkan Gnosis-nya diambil Signora sebagai bentuk penebusan diam-diam.",
                        "**Liyue:** Zhongli menukar Gnosis dengan Tsaritsa dalam 'Kontrak Akhir'. Isi kontrak diduga berkaitan dengan kebenaran Khaenri'ah.",
                        "**Inazuma:** Ei memutuskan koneksi dengan Celestia. Yae Miko menyerahkan Gnosis Elektro pada Scaramouche."
                    ],
                    details_en: [
                        "**Mondstadt:** Venti let Signora take his Gnosis as a form of silent atonement.",
                        "**Liyue:** Zhongli traded Gnosis with Tsaritsa in 'Final Contract'. Content likely relates to Khaenri'ah's truth.",
                        "**Inazuma:** Ei severed ties with Celestia. Yae Miko handed Electro Gnosis to Scaramouche."
                    ]
                },
                {
                    era_id: "Traveler: Act IV - V (Sumeru/Fontaine)", era_en: "Traveler: Act IV - V (Sumeru/Fontaine)", year: "Year 4-5", icon: "üíß",
                    desc_id: "Penghapusan Irminsul & Hancurnya Takhta Hydro.",
                    desc_en: "Irminsul Deletion & Destruction of Hydro Throne.",
                    details_id: [
                        "**Irminsul:** Nahida menghapus eksistensi Rukkhadevata dari memori dunia untuk menyembuhkan Pohon Dunia. Scaramouche mencoba menjadi dewa.",
                        "**Masquerade:** Focalors menipu Celestia selama 500 tahun. Ia menghukum mati dirinya sendiri untuk menghancurkan Takhta Hydro dan mengembalikan Otoritas Naga ke Neuvillette.",
                        "**Wahyu:** Skirk mengungkapkan bahwa Gnosis hanyalah 'Sisa-sisa Descender Ketiga' yang membawa sial."
                    ],
                    details_en: [
                        "**Irminsul:** Nahida erased Rukkhadevata from world memory to heal the World Tree. Scaramouche tried to become a god.",
                        "**Masquerade:** Focalors deceived Celestia for 500 years. She executed herself to destroy Hydro Throne, returning Dragon Authority to Neuvillette.",
                        "**Revelation:** Skirk revealed that Gnoses are merely 'Remains of the 3rd Descender' and bring misfortune."
                    ]
                },

                // --- EPOCH 6: THE FUTURE (SPECULATIVE / DOCS LORE) ---
                {
                    era_id: "Act VI: Natlan & Snezhnaya (Project Stuzha)", era_en: "Act VI: Natlan & Snezhnaya (Project Stuzha)", year: "Year 6", icon: "üî•",
                    desc_id: "Kebangkitan Api Suci & Pembakaran Dunia Lama.",
                    desc_en: "Resurrection of Sacred Flame & Burning of Old World.",
                    details_id: [
                        "**Natlan:** Capitano mencari Gnosis Pyro bukan untuk Tsaritsa, tapi untuk menyelamatkan Natlan dari Abyss (Night Kingdom).",
                        "**Project Stuzha:** Rencana Tsaritsa menggunakan ke-7 Gnosis untuk membekukan 'Waktu' Celestia, menghentikan siklus erosi.",
                        "**Bronya/Tsaritsa:** Sang Dewa Cinta yang membuang emosinya demi memimpin pemberontakan melawan Surga."
                    ],
                    details_en: [
                        "**Natlan:** Capitano seeks Pyro Gnosis not for Tsaritsa, but to save Natlan from the Abyss (Night Kingdom).",
                        "**Project Stuzha:** Tsaritsa's plan to use all 7 Gnoses to freeze Celestia's 'Time', halting the erosion cycle.",
                        "**Bronya/Tsaritsa:** The God of Love who discarded her emotions to lead the rebellion against Heaven."
                    ]
                },
                {
                    era_id: "Babak Final: Nod Krai (Black Elysium)", era_en: "Final Act: Nod Krai (Black Elysium)", year: "Endgame", icon: "üåå",
                    desc_id: "Wilayah Terlarang di Utara Snezhnaya. Kebenaran Bulan.",
                    desc_en: "Forbidden Region North of Snezhnaya. Truth of the Moon.",
                    details_id: [
                        "**Nod Krai:** Sisa peradaban Hyperborea yang menjaga bangkai 'Bulan Keempat' (Luna IV).",
                        "**Columbina:** Terungkap sebagai 'Kuutar' (Bulan Baru/Seraphim) yang jatuh. Ia bernyanyi untuk membangunkan yang tertidur.",
                        "**Faksi Akhir:** 'The Wild Hunt' (Rerir) vs 'Frostmoon Scions' (Lauma). Perebutan 'Moon Marrow' untuk membangkitkan Nibelung.",
                        "**Loom of Fate:** Abyss Sibling menggunakan alat ini untuk menenun ulang takdir, menciptakan 'Langit Baru' tanpa Celestia."
                    ],
                    details_en: [
                        "**Nod Krai:** Remnants of Hyperborea guarding the corpse of the '4th Moon' (Luna IV).",
                        "**Columbina:** Revealed as fallen 'Kuutar' (New Moon/Seraphim). She sings to awaken the sleeper.",
                        "**Final Factions:** 'The Wild Hunt' (Rerir) vs 'Frostmoon Scions' (Lauma). Battle for 'Moon Marrow' to resurrect Nibelung.",
                        "**Loom of Fate:** Abyss Sibling uses this device to reweave fate, creating a 'New Sky' without Celestia."
                    ]
                }
            ],           
            
            // == 2. WILAYAH & FAKSI (EXPANDED EDITION) ==
            nations: [
                // -- A. TUJUH BANGSA UTAMA --
                { id: "Mondstadt", el: "anemo", icon: "üçÉ", desc_id: "Kota Kebebasan & Angin Utara.", desc_en: "City of Freedom & Northern Wind.", leader_id: "Knights of Favonius", leader_en: "Knights of Favonius", archon: "Barbatos" },
                { id: "Liyue", el: "geo", icon: "üî∂", desc_id: "Pelabuhan Kontrak & Perdagangan.", desc_en: "Harbor of Contracts & Commerce.", leader_id: "Liyue Qixing", leader_en: "Liyue Qixing", archon: "Morax (Retired)" },
                { id: "Inazuma", el: "electro", icon: "‚ö°", desc_id: "Kepulauan Keabadian.", desc_en: "Archipelago of Eternity.", leader_id: "Raiden Shogun", leader_en: "Raiden Shogun", archon: "Beelzebul" },
                { id: "Sumeru", el: "dendro", icon: "üåø", desc_id: "Hutan Kebijaksanaan.", desc_en: "Forest of Wisdom.", leader_id: "Nahida", leader_en: "Nahida", archon: "Buer" },
                { id: "Fontaine", el: "hydro", icon: "üíß", desc_id: "Bangsa Keadilan.", desc_en: "Nation of Justice.", leader_id: "Neuvillette", leader_en: "Neuvillette", archon: "Destroyed" },
                { id: "Natlan", el: "pyro", icon: "üî•", desc_id: "Tanah Kebangkitan. Api Suci stabil.", desc_en: "Land of Resurrection. Sacred Flame stabilized.", leader_id: "Mavuika (Weakened)", leader_en: "Mavuika (Weakened)", archon: "Mavuika" },
                { id: "Snezhnaya", el: "cryo", icon: "‚ùÑÔ∏è", desc_id: "Tanah Tanpa Kasih. Persiapan 'Stuzha'.", desc_en: "Land of Loveless Snow. Preparing 'Stuzha'.", leader_id: "The Tsaritsa", leader_en: "The Tsaritsa", archon: "Tsaritsa" },
                
                // -- B. WILAYAH KHUSUS (ANCIENT/LOST/FORBIDDEN) --
                { id: "Nod Krai", el: "lunar", icon: "üåï", desc_id: "Sisa Bulan Keempat. Tanah 'Black Elysium'.", desc_en: "Remnant of 4th Moon. The 'Black Elysium'.", leader_id: "Lauma (Moonchanter)", leader_en: "Lauma (Moonchanter)", archon: "Sonnet (Dormant)" },
                { id: "Khaenri'ah", el: "abyss", icon: "üåë", desc_id: "Puing-puing Dinasti Gerhana & Bulan Merah.", desc_en: "Ruins of Eclipse & Crimson Moon Dynasties.", leader_id: "Abyss Order", leader_en: "Abyss Order", archon: "None" },
                { id: "Vishap Realm", el: "void", icon: "üê≤", desc_id: "Dunia lama sebelum manusia. Alam Tujuh Naga.", desc_en: "Old World before humanity. Realm of Seven Dragons.", leader_id: "Dragon King Nibelung", leader_en: "Dragon King Nibelung", archon: "Sovereigns" },
                { id: "Enkanomiya", el: "void", icon: "üêç", desc_id: "Negeri Malam Putih di bawah laut. Asal usul Orobashi.", desc_en: "The underwater Land of White Night. Origin of Orobashi.", leader_id: "Helios (Artificial Sun)", leader_en: "Helios (Artificial Sun)", archon: "Orobashi (Slain)" },
                { id: "Remuria", el: "hydro", icon: "üèõÔ∏è", desc_id: "Kerajaan Musik yang tenggelam di Lautan Masa Lalu.", desc_en: "Kingdom of Music sunken in the Sea of Bygone Eras.", leader_id: "God-King Remus", leader_en: "God-King Remus", archon: "None" },
                { id: "Sal Vindagnyr", el: "cryo", icon: "üèîÔ∏è", desc_id: "Kerajaan kuno di Dragonspine yang dihancurkan Paku Langit.", desc_en: "Ancient kingdom in Dragonspine destroyed by the Celestial Nail.", leader_id: "Princess of Sal Vindagnyr", leader_en: "Princess of Sal Vindagnyr", archon: "None" },
                { id: "The Dark Sea", el: "abyss", icon: "üåä", desc_id: "Wilayah di luar benua Teyvat tempat dewa kalah melarikan diri.", desc_en: "Lands outside Teyvat where defeated gods fled.", leader_id: "Unknown Gods", leader_en: "Unknown Gods", archon: "Chaos" },
                { id: "Mare Jivari", el: "pyro", icon: "üåã", desc_id: "Lautan abu tanpa angin tempat pahlawan mati.", desc_en: "Windless sea of ash where heroes die.", leader_id: "None", leader_en: "None", archon: "None" },

                // -- C. ORGANISASI & FAKSI --
                { id: "Celestia", el: "lunar", icon: "‚ú®", desc_id: "Pulau Langit. Takhta Prinsip Surgawi.", desc_en: "Sky Island. Throne of Heavenly Principles.", leader_id: "The Primordial One", leader_en: "The Primordial One", archon: "Supreme" },
                { id: "Hexenzirkel", el: "mystery", icon: "üîÆ", desc_id: "Meja Teh Penyihir Agung. Penjaga batas.", desc_en: "Tea Table of Great Witches. Boundary Keepers.", leader_id: "Alice (Elder)", leader_en: "Alice (Elder)", archon: "None" },
                { id: "Fatui Harbingers", el: "cryo", icon: "üé≠", desc_id: "Eksekutor Kehendak Tsaritsa.", desc_en: "Executors of Tsaritsa's Will.", leader_id: "Pierro (The Jester)", leader_en: "Pierro (The Jester)", archon: "Tsaritsa" },
                { id: "Abyss Order", el: "abyss", icon: "üëÅÔ∏è", desc_id: "Musuh Kemanusiaan. Mengubah takdir.", desc_en: "Enemy of Humanity. Reweaving fate.", leader_id: "The Prince/Princess", leader_en: "The Prince/Princess", archon: "Sinner" },
                { id: "The Adepti", el: "geo", icon: "‚òÅÔ∏è", desc_id: "Makhluk Iluminasi penjaga kontrak Liyue.", desc_en: "Illuminated Beasts guarding Liyue's contracts.", leader_id: "Moon Carver / Cloud Retainer", leader_en: "Moon Carver / Cloud Retainer", archon: "Morax" },
                { id: "House of the Hearth", el: "pyro", icon: "üè†", desc_id: "Panti asuhan Arlecchino untuk intelijen Fatui.", desc_en: "Arlecchino's orphanage for Fatui intelligence.", leader_id: "Arlecchino (The Knave)", leader_en: "Arlecchino (The Knave)", archon: "Tsaritsa" },
                { id: "The Eremites", el: "dendro", icon: "üß£", desc_id: "Tentara bayaran gurun, anak-anak Raja Deshret.", desc_en: "Desert mercenaries, children of King Deshret.", leader_id: "Various Tribes", leader_en: "Various Tribes", archon: "Deshret (Late)" },
                { id: "Shuumatsuban", el: "electro", icon: "ü•∑", desc_id: "Organisasi ninja rahasia di bawah Yashiro Commission.", desc_en: "Secret ninja organization under Yashiro Commission.", leader_id: "Kamisato Ayato", leader_en: "Kamisato Ayato", archon: "Raiden" },
                { id: "Spina di Rosula", el: "geo", icon: "üåπ", desc_id: "Organisasi 'mafia' pelindung rakyat bawah tanah Fontaine.", desc_en: "'Mafia' organization protecting Fontaine's underground.", leader_id: "Navia", leader_en: "Navia", archon: "Hydro Dragon" },
                { id: "Narzissenkreuz Ordo", el: "hydro", icon: "üó°Ô∏è", desc_id: "Perkumpulan rahasia pencegah kiamat.", desc_en: "Secret society preventing apocalypse.", leader_id: "Rene de Petrichor", leader_en: "Rene de Petrichor", archon: "None" },
                { id: "Temple of Silence", el: "electro", icon: "üè∫", desc_id: "Penjaga pengetahuan Raja Deshret.", desc_en: "Guardians of King Deshret's knowledge.", leader_id: "Sethos / Cyno", leader_en: "Sethos / Cyno", archon: "Deshret" },
                { id: "Adventurers' Guild", el: "void", icon: "‚öì", desc_id: "Jaringan global petualang.", desc_en: "Global adventurer network.", leader_id: "Katheryne", leader_en: "Katheryne", archon: "Unknown" },
                { id: "The Wild Hunt", el: "void", icon: "üê∫", desc_id: "Pasukan Abyssal Elit pengejar Moon Marrow.", desc_en: "Elite Abyssal Force hunting Moon Marrow.", leader_id: "Rerir (The Sinner)", leader_en: "Rerir (The Sinner)", archon: "Sinner" },
                { id: "Frostmoon Scions", el: "lunar", icon: "üôè", desc_id: "Pemuja Dewi Sonnet di Utara.", desc_en: "Worshippers of Sonnet in the North.", leader_id: "Lauma", leader_en: "Lauma", archon: "Sonnet" }
            ],

            // == 5. PUSTAKA AGUNG (100+ ENTRI) ==
            library: [
                // --- KATEGORI: NASKAH TERLARANG & KUNO ---
                { title_id: "Before Sun and Moon", title_en: "Before Sun and Moon", type: "Banned Book", icon: "üåë", desc_id: "Satu-satunya catatan tertulis tentang Phanes dan penciptaan dunia sebelum Takhta Kedua.", desc_en: "Only record of Phanes and creation before the Second Throne." },
                { title_id: "The Byakuyakoku Collection", title_en: "The Byakuyakoku Collection", type: "Archive", icon: "üêç", desc_id: "Sejarah Enkanomiya dan eksperimen 'bunuh diri' Orobashi.", desc_en: "History of Enkanomiya and Orobashi's 'suicide' experiment." },
                { title_id: "Hymns of the Far North", title_en: "Hymns of the Far North", type: "Ancient Text", icon: "üìú", desc_id: "Mengungkap Dewi Bulan adalah ciptaan Nibelung, bukan Phanes.", desc_en: "Reveals Moon Sisters were created by Nibelung, not Phanes." },
                { title_id: "Perinheri", title_en: "Perinheri", type: "History", icon: "üè∞", desc_id: "Sejarah Dinasti Crimson Moon Khaenri'ah dan panti asuhan Arlecchino.", desc_en: "History of Crimson Moon Dynasty and Arlecchino's orphanage." },
                { title_id: "The Pale Princess & Six Pygmies", title_en: "The Pale Princess & Six Pygmies", type: "Fairy Tale", icon: "üëë", desc_id: "Buku terpenting. Nubuat tentang Traveler menyelamatkan Teyvat dari Bunda Malam.", desc_en: "Crucial prophecy of Traveler saving Teyvat from the Night Mother." },
                
                // --- KATEGORI: ARTEFAK MONDSTADT ---
                { title_id: "Gladiator's Finale", title_en: "Gladiator's Finale", type: "Artifact", icon: "‚öîÔ∏è", desc_id: "Kisah Vanessa sang Gladiator yang membebaskan Mondstadt.", desc_en: "Story of Vanessa the Gladiator liberating Mondstadt." },
                { title_id: "Wanderer's Troupe", title_en: "Wanderer's Troupe", type: "Artifact", icon: "üé∂", desc_id: "Kisah rombongan musisi yang mencoba membunuh bangsawan tiran.", desc_en: "Troupe of musicians attempting to assassinate aristocrats." },
                { title_id: "Viridescent Venerer", title_en: "Viridescent Venerer", type: "Artifact", icon: "üçÉ", desc_id: "Pemburu yang melupakan namanya demi memburu monster Bencana.", desc_en: "Hunter who forgot her name to hunt Cataclysm monsters." },
                { title_id: "Thundering Fury", title_en: "Thundering Fury", type: "Artifact", icon: "‚ö°", desc_id: "Tragedi Ruu dan Thunderbird di Pulau Tsurumi.", desc_en: "Tragedy of Ruu and the Thunderbird on Tsurumi Island." },
                { title_id: "Maiden Beloved", title_en: "Maiden Beloved", type: "Artifact", icon: "üåπ", desc_id: "Cinta tragis antara 'The White Knight' dan gadis yang menunggunya.", desc_en: "Tragic love between 'The White Knight' and the maiden." },

                // --- KATEGORI: ARTEFAK LIYUE ---
                { title_id: "Crimson Witch of Flames", title_en: "Crimson Witch of Flames", type: "Artifact", icon: "üî•", desc_id: "Masa lalu Signora (Rosalyne) sebelum menjadi Fatui Harbinger.", desc_en: "Past of Signora (Rosalyne) before becoming a Fatui Harbinger." },
                { title_id: "Noblesse Oblige", title_en: "Noblesse Oblige", type: "Artifact", icon: "üëë", desc_id: "Sejarah klan bangsawan Lawrence, Gunnhildr, dan Imunlaukr.", desc_en: "History of Lawrence, Gunnhildr, and Imunlaukr clans." },
                { title_id: "Archaic Petra", title_en: "Archaic Petra", type: "Artifact", icon: "üî∂", desc_id: "Legenda Rex Lapis saat membelah gunung di masa perang.", desc_en: "Legend of Rex Lapis splitting mountains during the war." },
                { title_id: "Retracing Bolide", title_en: "Retracing Bolide", type: "Artifact", icon: "‚òÑÔ∏è", desc_id: "Kisah tentang Kitsune dan Festival Musim Panas.", desc_en: "Story of the Kitsune and the Summer Festival." },
                { title_id: "Bloodstained Chivalry", title_en: "Bloodstained Chivalry", type: "Artifact", icon: "ü©∏", desc_id: "Ksatria Putih yang ternoda oleh darah Abyss karena keadilan.", desc_en: "White Knight stained by Abyss blood for justice." },

                // --- KATEGORI: ARTEFAK INAZUMA ---
                { title_id: "Emblem of Severed Fate", title_en: "Emblem of Severed Fate", type: "Artifact", icon: "‚ö°", desc_id: "Kenangan Ei tentang Makoto, Chiyo, dan Saiguu.", desc_en: "Ei's memories of Makoto, Chiyo, and Saiguu." },
                { title_id: "Shimenawa's Reminiscence", title_en: "Shimenawa's Reminiscence", type: "Artifact", icon: "üéÄ", desc_id: "Kisah Asase Hibiki dan bajak laut Ako Domeki.", desc_en: "Story of Asase Hibiki and pirate Ako Domeki." },
                { title_id: "Husk of Opulent Dreams", title_en: "Husk of Opulent Dreams", type: "Artifact", icon: "üéé", desc_id: "Masa lalu Scaramouche (Kunikuzushi) saat baru diciptakan.", desc_en: "Past of Scaramouche (Kunikuzushi) when first created." },
                { title_id: "Ocean-Hued Clam", title_en: "Ocean-Hued Clam", type: "Artifact", icon: "üêö", desc_id: "Pengorbanan Orobashi demi rakyat Watatsumi.", desc_en: "Orobashi's sacrifice for the people of Watatsumi." },
                
                // --- KATEGORI: ARTEFAK SUMERU ---
                { title_id: "Deepwood Memories", title_en: "Deepwood Memories", type: "Artifact", icon: "üå≥", desc_id: "Persahabatan Rukkhadevata dan Dewi Bunga.", desc_en: "Friendship of Rukkhadevata and Goddess of Flowers." },
                { title_id: "Gilded Dreams", title_en: "Gilded Dreams", type: "Artifact", icon: "üè∫", desc_id: "Ambisi Raja Deshret menolak Celestia.", desc_en: "King Deshret's ambition to reject Celestia." },
                { title_id: "Flower of Paradise Lost", title_en: "Flower of Paradise Lost", type: "Artifact", icon: "üå∫", desc_id: "Kisah tragis Dewi Bunga (Nabu Malikata).", desc_en: "Tragic story of the Goddess of Flowers (Nabu Malikata)." },
                { title_id: "Desert Pavilion Chronicle", title_en: "Desert Pavilion Chronicle", type: "Artifact", icon: "üèúÔ∏è", desc_id: "Sejarah dinasti manusia di gurun pasca kematian Deshret.", desc_en: "History of human dynasties in desert after Deshret's death." },

                // --- KATEGORI: ARTEFAK FONTAINE ---
                { title_id: "Nymph's Dream", title_en: "Nymph's Dream", type: "Artifact", icon: "üíß", desc_id: "Kisah Direktur Lyris dan Institut Narzissenkreuz.", desc_en: "Story of Director Lyris and Narcissus Institute." },
                { title_id: "Vourukasha's Glow", title_en: "Vourukasha's Glow", type: "Artifact", icon: "üå∏", desc_id: "Pengorbanan Egeria dan Burung Simurgh.", desc_en: "Sacrifice of Egeria and the Simurgh Bird." },
                { title_id: "Marechaussee Hunter", title_en: "Marechaussee Hunter", type: "Artifact", icon: "üïµÔ∏è", desc_id: "Asal usul Pasukan Pemburu Bayangan (Phantom).", desc_en: "Origin of the Marechaussee Phantom hunters." },
                { title_id: "Golden Troupe", title_en: "Golden Troupe", type: "Artifact", icon: "üé∫", desc_id: "Kejatuhan Remuria dan Raja God-King Remus.", desc_en: "Fall of Remuria and God-King Remus." },

                // --- KATEGORI: ARTEFAK NATLAN (NEW) ---
                { title_id: "Obsidian Codex", title_en: "Obsidian Codex", type: "Artifact", icon: "üî•", desc_id: "Ramalan tentang 'Sage of Stolen Flame' (Xbalanque).", desc_en: "Prophecy of 'Sage of Stolen Flame' (Xbalanque)." },
                { title_id: "Scroll of the Hero", title_en: "Scroll of the Hero", type: "Artifact", icon: "üìú", desc_id: "Legenda pahlawan pertama Natlan melawan Abyss.", desc_en: "Legend of Natlan's first hero against the Abyss." },

                // --- KATEGORI: LORE SENJATA (WEAPONS) ---
                { title_id: "Kagura's Verity", title_en: "Kagura's Verity", type: "Weapon", icon: "‚ö°", desc_id: "Tarian terakhir Kitsune Saiguu.", desc_en: "Kitsune Saiguu's final dance." },
                { title_id: "Polar Star", title_en: "Polar Star", type: "Weapon", icon: "‚ùÑÔ∏è", desc_id: "Sumpah setia Childe pada Tsaritsa.", desc_en: "Childe's oath of loyalty to Tsaritsa." },
                { title_id: "Staff of Homa", title_en: "Staff of Homa", type: "Weapon", icon: "üî•", desc_id: "Ritual pembersihan mayat dewa di Liyue.", desc_en: "God corpse cleansing ritual in Liyue." },
                { title_id: "Primordial Jade Cutter", title_en: "Primordial Jade Cutter", type: "Weapon", icon: "üó°Ô∏è", desc_id: "Rex Lapis membunuh temannya sendiri.", desc_en: "Rex Lapis slaying his own friend." },
                { title_id: "Mistsplitter Reforged", title_en: "Mistsplitter Reforged", type: "Weapon", icon: "üü£", desc_id: "Pedang yang diberikan Ei kepada Shogun.", desc_en: "Sword given by Ei to the Shogun." },
                { title_id: "Elegy for the End", title_en: "Elegy for the End", type: "Weapon", icon: "üèπ", desc_id: "Lagu perpisahan Venti untuk Dvalin.", desc_en: "Venti's farewell song for Dvalin." },
                { title_id: "Skyward Harp", title_en: "Skyward Harp", type: "Weapon", icon: "üçÉ", desc_id: "Asal usul Dvalin sang Naga Timur.", desc_en: "Origin of Dvalin the Dragon of the East." },
                { title_id: "Wolf's Gravestone", title_en: "Wolf's Gravestone", type: "Weapon", icon: "üê∫", desc_id: "Makam serigala Boreas (Andrius).", desc_en: "Grave of the Wolf Boreas (Andrius)." },
                { title_id: "The Catch", title_en: "The Catch", type: "Weapon", icon: "üé£", desc_id: "Trisula rampasan bandit Ako Domeki.", desc_en: "Trident looted by bandit Ako Domeki." },
                { title_id: "Dodoco Tales", title_en: "Dodoco Tales", type: "Weapon", icon: "üìï", desc_id: "Buku cerita buatan Alice untuk Klee.", desc_en: "Storybook made by Alice for Klee." },
                { title_id: "Festering Desire", title_en: "Festering Desire", type: "Weapon", icon: "‚ò†Ô∏è", desc_id: "Pedang terkutuk berisi darah Durin.", desc_en: "Cursed sword containing Durin's blood." },
                { title_id: "Cinnabar Spindle", title_en: "Cinnabar Spindle", type: "Weapon", icon: "üñåÔ∏è", desc_id: "Alat alkimia Rhinedottir.", desc_en: "Rhinedottir's alchemy tool." },

                // --- KATEGORI: BUKU DUNIA (WORLD BOOKS) ---
                { title_id: "Teyvat Travel Guide", title_en: "Teyvat Travel Guide", type: "Guide", icon: "üìì", desc_id: "Panduan perjalanan kacau tulisan Alice.", desc_en: "Chaotic travel guide written by Alice." },
                { title_id: "The Boar Princess", title_en: "The Boar Princess", type: "Fairy Tale", icon: "üêó", desc_id: "Alegori korupsi Abyss di Dragonspine.", desc_en: "Allegory of Abyss corruption in Dragonspine." },
                { title_id: "Legend of the Shattered Halberd", title_en: "Legend of the Shattered Halberd", type: "Novel", icon: "‚öîÔ∏è", desc_id: "Kisah fiksi yang ternyata menyimpan lokasi senjata dewa.", desc_en: "Fiction that hides god weapon locations." },
                { title_id: "Heart's Desire", title_en: "Heart's Desire", type: "Novel", icon: "üíé", desc_id: "Kisah tentang toko antik misterius di Liyue.", desc_en: "Story about a mysterious antique shop in Liyue." },
                { title_id: "Flowers for Princess Fischl", title_en: "Flowers for Princess Fischl", type: "Novel", icon: "üè∞", desc_id: "Novel yang memprediksi kiamat dunia lain (Honkai?).", desc_en: "Novel predicting other worlds' apocalypse." },
                { title_id: "Vera's Melancholy", title_en: "Vera's Melancholy", type: "Novel", icon: "üìñ", desc_id: "Kisah teman masa kecil yang terpisah dimensi.", desc_en: "Story of childhood friends separated by dimensions." },
                { title_id: "Rex Incognito", title_en: "Rex Incognito", type: "Folklore", icon: "üî∂", desc_id: "Kumpulan cerita penyamaran Morax.", desc_en: "Collection of Morax's disguises." },
                { title_id: "Yakshas: The Guardian Adepti", title_en: "Yakshas: The Guardian Adepti", type: "History", icon: "üëπ", desc_id: "Nasib tragis 5 Yaksha utama.", desc_en: "Tragic fate of the 5 main Yakshas." },
                { title_id: "Customs of Liyue", title_en: "Customs of Liyue", type: "Culture", icon: "üèÆ", desc_id: "Tradisi dan ritual pernikahan kuno Liyue.", desc_en: "Ancient Liyue wedding traditions and rituals." },
                { title_id: "Diary of Roald", title_en: "Diary of Roald", type: "Journal", icon: "üìù", desc_id: "Catatan petualang yang pelupa.", desc_en: "Journal of a forgetful adventurer." },

                // --- KATEGORI: MATERIAL BOSS & RELIK ---
                { title_id: "Molten Moment", title_en: "Molten Moment", type: "Relic", icon: "üî•", desc_id: "Sisa kekuatan Signora (Crimson Witch).", desc_en: "Remnant of Signora's power." },
                { title_id: "Hellfire Butterfly", title_en: "Hellfire Butterfly", type: "Relic", icon: "ü¶ã", desc_id: "Kupu-kupu api, simbol kebebasan Signora.", desc_en: "Fire butterfly, symbol of Signora's freedom." },
                { title_id: "Ashen Heart", title_en: "Ashen Heart", type: "Relic", icon: "üñ§", desc_id: "Jantung beku Signora yang dihancurkan Raiden.", desc_en: "Signora's frozen heart destroyed by Raiden." },
                { title_id: "Puppet Strings", title_en: "Puppet Strings", type: "Relic", icon: "üßµ", desc_id: "Tali pengendali Shouki no Kami (Scaramouche).", desc_en: "Control strings of Shouki no Kami." },
                { title_id: "Mirror of Mushin", title_en: "Mirror of Mushin", type: "Relic", icon: "ü™û", desc_id: "Cermin yang memisahkan kebenaran dan ilusi.", desc_en: "Mirror separating truth and illusion." },
                { title_id: "Daka's Bell", title_en: "Daka's Bell", type: "Relic", icon: "üîî", desc_id: "Lonceng kenangan Scaramouche.", desc_en: "Scaramouche's bell of memories." },
                { title_id: "Lightless Silk String", title_en: "Lightless Silk String", type: "Relic", icon: "üêã", desc_id: "Benang dari Narwhal (Paus Abyss).", desc_en: "String from the Narwhal (Abyss Whale)." },
                { title_id: "Lightless Eye", title_en: "Lightless Eye", type: "Relic", icon: "üëÅÔ∏è", desc_id: "Mata pusaran dari perut Paus Abyss.", desc_en: "Vortex eye from Abyss Whale's belly." },
                { title_id: "Dragon Lord's Crown", title_en: "Dragon Lord's Crown", type: "Relic", icon: "üëë", desc_id: "Mahkota Azhdaha, Raja Geovishap.", desc_en: "Crown of Azhdaha, King of Geovishaps." },
                { title_id: "Bloodjade Branch", title_en: "Bloodjade Branch", type: "Relic", icon: "üåø", desc_id: "Cabang terkutuk dari tubuh Azhdaha.", desc_en: "Cursed branch from Azhdaha's body." },
                { title_id: "Gilded Scale", title_en: "Gilded Scale", type: "Relic", icon: "üõ°Ô∏è", desc_id: "Sisik emas Azhdaha yang mengeras.", desc_en: "Hardened golden scale of Azhdaha." },
                { title_id: "Ring of Boreas", title_en: "Ring of Boreas", type: "Relic", icon: "üíç", desc_id: "Cincin es milik Raja Serigala.", desc_en: "Ice ring of the Wolf King." },
                { title_id: "Spirit Locket of Boreas", title_en: "Spirit Locket of Boreas", type: "Relic", icon: "üîí", desc_id: "Liontin berisi roh angin utara.", desc_en: "Locket containing the north wind spirit." },
                { title_id: "Tail of Boreas", title_en: "Tail of Boreas", type: "Relic", icon: "üê∫", desc_id: "Ekor beku Andrius.", desc_en: "Frozen tail of Andrius." },
                { title_id: "Dvalin's Plume", title_en: "Dvalin's Plume", type: "Relic", icon: "ü™∂", desc_id: "Bulu punggung Stormterror.", desc_en: "Plume from Stormterror's back." },
                { title_id: "Dvalin's Claw", title_en: "Dvalin's Claw", type: "Relic", icon: "üíÖ", desc_id: "Cakar naga yang pernah merobek Durin.", desc_en: "Dragon claw that tore Durin apart." },
                { title_id: "Dvalin's Sigh", title_en: "Dvalin's Sigh", type: "Relic", icon: "üí®", desc_id: "Napas angin naga timur.", desc_en: "Wind breath of the east dragon." },
                { title_id: "Shadow of the Warrior", title_en: "Shadow of the Warrior", type: "Relic", icon: "üåë", desc_id: "Bayangan Childe dalam wujud Foul Legacy.", desc_en: "Childe's shadow in Foul Legacy form." },
                { title_id: "Shard of a Foul Legacy", title_en: "Shard of a Foul Legacy", type: "Relic", icon: "‚öîÔ∏è", desc_id: "Pecahan armor Abyss Childe.", desc_en: "Shard of Childe's Abyss armor." },
                { title_id: "Tusk of Monoceros Caeli", title_en: "Tusk of Monoceros Caeli", type: "Relic", icon: "ü¶Ñ", desc_id: "Tanduk paus konstelasi Childe.", desc_en: "Horn of Childe's whale constellation." },
                { title_id: "Mudra of the Malefic General", title_en: "Mudra of the Malefic General", type: "Relic", icon: "‚úã", desc_id: "Tangan boneka Raiden Shogun.", desc_en: "Hand of the Raiden Shogun puppet." },
                { title_id: "Tears of the Calamitous God", title_en: "Tears of the Calamitous God", type: "Relic", icon: "üíß", desc_id: "Air mata boneka Shogun saat kalah.", desc_en: "Shogun puppet's tears upon defeat." },
                { title_id: "The Meaning of Aeons", title_en: "The Meaning of Aeons", type: "Relic", icon: "‚è≥", desc_id: "Inti keabadian Raiden Makoto.", desc_en: "Essence of Raiden Makoto's eternity." },

                // --- KATEGORI: ITEM KHUSUS & LAINNYA ---
                { title_id: "Hex & Hound", title_en: "Hex & Hound", type: "Novel", icon: "üêï", desc_id: "Alegori hubungan Gold dan Albedo.", desc_en: "Allegory of Gold and Albedo." },
                { title_id: "The Little Witch's Dictionary", title_en: "The Little Witch's Dictionary", type: "Grimoire", icon: "üßô‚Äç‚ôÄÔ∏è", desc_id: "Kamus sihir Hexenzirkel.", desc_en: "Hexenzirkel magic dictionary." },
                { title_id: "A Drunkard's Tale", title_en: "A Drunkard's Tale", type: "Folklore", icon: "üç∑", desc_id: "Kisah tentang Seelie dan istana bulan.", desc_en: "Tale of Seelies and the moon palace." },
                { title_id: "Moon Marrow Samples", title_en: "Moon Marrow Samples", type: "Sample", icon: "üß™", desc_id: "Sampel bulan Dottore.", desc_en: "Dottore's moon samples." },
                { title_id: "Lullaby for Columbula", title_en: "Lullaby for Columbula", type: "Song", icon: "üéµ", desc_id: "Lagu untuk Columbina.", desc_en: "Song for Columbina." },
                { title_id: "Kabukimono's Feather", title_en: "Kabukimono's Feather", type: "Relic", icon: "ü™∂", desc_id: "Bulu emas Scaramouche.", desc_en: "Scaramouche's golden feather." },
                { title_id: "Nibelung's Scale", title_en: "Nibelung's Scale", type: "Relic", icon: "üõ°Ô∏è", desc_id: "Sisik Raja Naga Nibelung.", desc_en: "Scale of Dragon King Nibelung." },
                { title_id: "Scroll of Streaming Song", title_en: "Scroll of Streaming Song", type: "Scripture", icon: "üåø", desc_id: "Naskah Rukkhadevata yang dihapus.", desc_en: "Erased scripture of Rukkhadevata." },
                { title_id: "The Fall of Remuria", title_en: "The Fall of Remuria", type: "History", icon: "üèõÔ∏è", desc_id: "Sejarah jatuhnya Remus.", desc_en: "History of Remus's fall." },
                { title_id: "Mask of the Kijin", title_en: "Mask of the Kijin", type: "Relic", icon: "üë∫", desc_id: "Topeng Oni Chiyo.", desc_en: "Mask of Oni Chiyo." },
                { title_id: "Tsurumi Island Murals", title_en: "Tsurumi Island Murals", type: "Art", icon: "üå´Ô∏è", desc_id: "Mural Thunderbird.", desc_en: "Thunderbird murals." },
                { title_id: "Ruu's Feather", title_en: "Ruu's Feather", type: "Relic", icon: "ü™∂", desc_id: "Bulu untuk Ruu.", desc_en: "Feather for Ruu." },
                { title_id: "Gnosis (Electro)", title_en: "Gnosis (Electro)", type: "Divine", icon: "‚ôüÔ∏è", desc_id: "Jantung Dewa Listrik.", desc_en: "Heart of the Electro God." },
                { title_id: "Gnosis (Dendro)", title_en: "Gnosis (Dendro)", type: "Divine", icon: "‚ôüÔ∏è", desc_id: "Jantung Dewa Rumput.", desc_en: "Heart of the Dendro God." },
                { title_id: "Deshret's Map", title_en: "Deshret's Map", type: "Map", icon: "üó∫Ô∏è", desc_id: "Peta makam Deshret.", desc_en: "Map of Deshret's tomb." },
                { title_id: "Narzissenkreuz Notes", title_en: "Narzissenkreuz Notes", type: "Research", icon: "üìù", desc_id: "Rumus kiamat Rene.", desc_en: "Rene's apocalypse formula." },
                { title_id: "Holy Lyre der Himmel", title_en: "Holy Lyre der Himmel", type: "Relic", icon: "üéª", desc_id: "Lyre Barbatos.", desc_en: "Barbatos's Lyre." },
                { title_id: "Whopperflower Nectar", title_en: "Whopperflower Nectar", type: "Biology", icon: "üå∏", desc_id: "Studi tanaman mimikri.", desc_en: "Study of mimicry plants." },
                { title_id: "Foul Legacy Tech", title_en: "Foul Legacy Tech", type: "Abyss", icon: "‚ö°", desc_id: "Teknik Skirk.", desc_en: "Skirk's technique." },
                { title_id: "Art of Khemia", title_en: "Art of Khemia", type: "Alchemy", icon: "‚öóÔ∏è", desc_id: "Seni cipta hidup Khaenri'ah.", desc_en: "Khaenri'ah's life creation art." },
                { title_id: "Statue of Her Excellency", title_en: "Statue of Her Excellency", type: "Figure", icon: "üéé", desc_id: "Patung Raiden buatan Sara.", desc_en: "Sara's handmade Raiden statue." },
                { title_id: "Teucer's Allowance", title_en: "Teucer's Allowance", type: "Mora", icon: "üí∞", desc_id: "Uang saku Teucer.", desc_en: "Teucer's allowance." },
                { title_id: "Dull Blade", title_en: "Dull Blade", type: "Weapon", icon: "üó°Ô∏è", desc_id: "Pedang Traveler.", desc_en: "Traveler's sword." },
                { title_id: "Emergency Rations", title_en: "Emergency Rations", type: "Creature", icon: "üßö‚Äç‚ôÄÔ∏è", desc_id: "Paimon?", desc_en: "Paimon?" },
                { title_id: "Adeptus Temptation", title_en: "Adeptus Temptation", type: "Food", icon: "üç≤", desc_id: "Makanan kesukaan Adeptus.", desc_en: "Adeptus' favorite food." },
                { title_id: "Almond Tofu", title_en: "Almond Tofu", type: "Food", icon: "üçÆ", desc_id: "Makanan kesukaan Xiao.", desc_en: "Xiao's favorite food." },
                { title_id: "Osmanthus Wine", title_en: "Osmanthus Wine", type: "Drink", icon: "üç∂", desc_id: "Minuman kenangan Zhongli.", desc_en: "Zhongli's memory drink." },
                { title_id: "Dango Milk", title_en: "Dango Milk", type: "Drink", icon: "üç°", desc_id: "Minuman favorit Ei.", desc_en: "Ei's favorite drink." },
                { title_id: "Fonta", title_en: "Fonta", type: "Drink", icon: "ü•§", desc_id: "Minuman bersoda Fontaine.", desc_en: "Fontaine soda drink." },
                { title_id: "Sango Pearl", title_en: "Sango Pearl", type: "Material", icon: "ü¶™", desc_id: "Mutiara Watatsumi.", desc_en: "Watatsumi pearl." },
                { title_id: "Naku Weed", title_en: "Naku Weed", type: "Plant", icon: "üåø", desc_id: "Tanaman listrik Inazuma.", desc_en: "Inazuma electric plant." },
                { title_id: "Cecilia", title_en: "Cecilia", type: "Flower", icon: "üåº", desc_id: "Bunga tebing Mondstadt.", desc_en: "Mondstadt cliff flower." },
                { title_id: "Glaze Lily", title_en: "Glaze Lily", type: "Flower", icon: "üå∫", desc_id: "Bunga kesukaan Guizhong.", desc_en: "Guizhong's favorite flower." },
                { title_id: "Padisarah", title_en: "Padisarah", type: "Flower", icon: "üå∑", desc_id: "Bunga ciptaan Dewi Bunga.", desc_en: "Flower created by Goddess of Flowers." },
                { title_id: "Lumidouce Bell", title_en: "Lumidouce Bell", type: "Flower", icon: "üîî", desc_id: "Bunga perpisahan Fontaine.", desc_en: "Fontaine farewell flower." },
                { title_id: "Rainbow Rose", title_en: "Rainbow Rose", type: "Flower", icon: "üåπ", desc_id: "Mawar khas Fontaine.", desc_en: "Fontaine signature rose." },
                { title_id: "Qingxin", title_en: "Qingxin", type: "Flower", icon: "üí†", desc_id: "Bunga puncak gunung Liyue.", desc_en: "Liyue mountain peak flower." },
                { title_id: "Violetgrass", title_en: "Violetgrass", type: "Plant", icon: "üü£", desc_id: "Tanaman tebing Liyue.", desc_en: "Liyue cliff plant." },
                { title_id: "Wolfhook", title_en: "Wolfhook", type: "Berry", icon: "üçá", desc_id: "Buah hutan Wolvendom.", desc_en: "Wolvendom forest fruit." },
                { title_id: "Valberry", title_en: "Valberry", type: "Berry", icon: "üçì", desc_id: "Buah pegunungan badai.", desc_en: "Stormbearer mountain fruit." }
            ],

            // == 3. KOSMOLOGI (STRUKTUR DUNIA & HUKUM ALAM) ==
            cosmology: [
                // --- STRUKTUR UTAMA (THE THREE REALMS) ---
                { title_id: "Alam Manusia", title_en: "Human Realm", text_id: "Dunia permukaan tempat manusia hidup, distabilkan oleh Archon.", text_en: "Surface world where humans live, stabilized by Archons.", icon: "üåç" },
                { title_id: "Alam Cahaya", title_en: "Light Realm", text_id: "Dunia elemen murni (Vishap Realm). Mematikan bagi manusia.", text_en: "World of pure elements (Vishap Realm). Deadly to humans.", icon: "üê≤" },
                { title_id: "Alam Hampa", title_en: "Void Realm", text_id: "Dunia kegelapan (Abyss). Sumber korupsi dan kekuatan luar.", text_en: "World of darkness (Abyss). Source of corruption and outer power.", icon: "üåë" },

                // --- LANGIT & TAKDIR ---
                { title_id: "Langit Palsu", title_en: "The False Sky", text_id: "Kubah buatan Phanes yang memisahkan Teyvat dari alam semesta asli.", text_en: "Artificial dome by Phanes separating Teyvat from the real universe.", icon: "üåå" },
                { title_id: "Konstelasi", title_en: "Constellations", text_id: "Pola bintang yang menentukan takdir (Stella Fortuna) pemegang Vision.", text_en: "Star patterns dictating the fate (Stella Fortuna) of Vision holders.", icon: "‚ú®" },
                { title_id: "Takdir", title_en: "Fate", text_id: "Skenario yang sudah tertulis di bintang-bintang, sulit diubah.", text_en: "Script written in the stars, difficult to change.", icon: "üìú" },
                { title_id: "Loom of Fate", title_en: "Loom of Fate", text_id: "Operasi Abyss untuk menenun ulang takdir tanpa campur tangan Celestia.", text_en: "Abyss operation to reweave fate without Celestia's interference.", icon: "üß∂" },

                // --- SISTEM ENERGI ---
                { title_id: "Irminsul", title_en: "Irminsul", text_id: "Pohon Putih raksasa yang menyimpan seluruh memori dan sejarah dunia.", text_en: "Giant White Tree storing all memories and history of the world.", icon: "üå≥" },
                { title_id: "Ley Lines", title_en: "Ley Lines", text_id: "Akar Irminsul yang mengalirkan elemen dan memori ke permukaan.", text_en: "Roots of Irminsul flowing elements and memories to the surface.", icon: "üå±" },
                { title_id: "Pengetahuan Terlarang", title_en: "Forbidden Knowledge", text_id: "Kebenaran dari luar Teyvat (Abyss) yang meracuni pikiran dan dunia.", text_en: "Truth from outside Teyvat (Abyss) that poisons minds and the world.", icon: "üß†" },
                { title_id: "Energi Elemental", title_en: "Elemental Energy", text_id: "Tujuh elemen dasar pembentuk materi di Alam Manusia.", text_en: "Seven basic elements building matter in the Human Realm.", icon: "üî•" },
                { title_id: "Energi Abyssal", title_en: "Abyssal Energy", text_id: "Energi perusak yang bisa menetralkan elemen cahaya (Light).", text_en: "Destructive energy capable of neutralizing Light elements.", icon: "üëÅÔ∏è" },

                // --- OBJEK ILAHI ---
                { title_id: "Celestia", title_en: "Celestia", text_id: "Pulau melayang, tempat bersemayamnya 'The Heavenly Principles'.", text_en: "Floating island, abode of 'The Heavenly Principles'.", icon: "üèõÔ∏è" },
                { title_id: "Takhta Ilahi", title_en: "Divine Throne", text_id: "Tujuh kursi kekuasaan yang diciptakan dengan mencuri otoritas Naga.", text_en: "Seven seats of power created by stealing Dragon authority.", icon: "ü™ë" },
                { title_id: "Gnosis", title_en: "Gnosis", text_id: "Jantung Naga (Heart of God) yang menjadi bukti otoritas Archon.", text_en: "Dragon Heart (Heart of God) serving as Archon's authority proof.", icon: "‚ôüÔ∏è" },
                { title_id: "Vision", title_en: "Vision", text_id: "Organ sihir eksternal yang diberikan kepada manusia dengan ambisi kuat.", text_en: "External magic organ granted to humans with strong ambition.", icon: "üíé" },
                { title_id: "Delusion", title_en: "Delusion", text_id: "Vision buatan Fatui. Menggunakan sisa dewa, menukar nyawa dengan kekuatan.", text_en: "Fatui-made Vision. Uses god residue, trading life for power.", icon: "üé≠" },
                { title_id: "Celestial Nail", title_en: "Celestial Nail", text_id: "Paku langit untuk menahan penyebaran Abyss, namun menghancurkan peradaban.", text_en: "Sky nails to halt Abyss spread, but destroy civilizations.", icon: "üî©" },

                // --- HUKUM & SIKLUS ---
                { title_id: "Erosi", title_en: "Erosion", text_id: "Hukum alami yang mengikis jiwa dan memori makhluk berumur panjang.", text_en: "Natural law eroding the soul and memory of long-lived beings.", icon: "‚è≥" },
                { title_id: "Samsara", title_en: "Samsara", text_id: "Siklus pengulangan waktu/peristiwa (seperti Festival Sabzeruz).", text_en: "Cycle of repeating time/events (like Sabzeruz Festival).", icon: "üîÑ" },
                { title_id: "Prinsip Surgawi", title_en: "Heavenly Principles", text_id: "Hukum mutlak yang dijaga oleh 'The Sustainer' agar Teyvat tidak hancur.", text_en: "Absolute laws guarded by 'The Sustainer' to keep Teyvat intact.", icon: "‚öñÔ∏è" },
                { title_id: "Kutukan Alam Liar", title_en: "Curse of Wilderness", text_id: "Hukuman bagi warga Khaenri'ah campuran menjadi Hilichurl.", text_en: "Punishment turning mixed-blood Khaenri'ahns into Hilichurls.", icon: "üëπ" },
                { title_id: "Kutukan Keabadian", title_en: "Curse of Immortality", text_id: "Hukuman bagi warga Khaenri'ah murni untuk tidak bisa mati.", text_en: "Punishment for pure-blood Khaenri'ahns preventing death.", icon: "‚ôæÔ∏è" },

                // --- ENTITAS ---
                { title_id: "Descender", title_en: "Descender", text_id: "Makhluk luar yang memiliki kehendak setara 'Dunia'. (Traveler adalah ke-4).", text_en: "Outer beings with wills equal to a 'World'. (Traveler is 4th).", icon: "‚òÑÔ∏è" },
                { title_id: "Allogenes", title_en: "Allogenes", text_id: "Sebutan kuno (Genshin) bagi pemegang Vision yang berpotensi naik ke Celestia.", text_en: "Ancient term (Genshin) for Vision holders with potential to ascend.", icon: "üë§" },
                { title_id: "Shades of Phanes", title_en: "Shades of Phanes", text_id: "4 Bayangan Pencipta: Waktu (Istaroth), Hidup, Mati, dan Ruang.", text_en: "4 Shades of Creator: Time (Istaroth), Life, Death, and Space.", icon: "üïäÔ∏è" },
                { title_id: "Seven Sovereigns", title_en: "Seven Sovereigns", text_id: "Tujuh Raja Naga asli penguasa elemen murni sebelum Phanes datang.", text_en: "Seven Dragon Kings ruling pure elements before Phanes arrived.", icon: "üêâ" },

                // --- SIHIR & TEKNOLOGI ---
                { title_id: "Khemia", title_en: "Khemia", text_id: "Seni alkimia kuno Khaenri'ah untuk menciptakan kehidupan.", text_en: "Ancient Khaenri'ah alchemy art to create life.", icon: "‚öóÔ∏è" },
                { title_id: "Hexerei", title_en: "Hexerei", text_id: "Sihir murni yang menggunakan Irminsul, dikuasai Hexenzirkel.", text_en: "Pure magic utilizing Irminsul, mastered by Hexenzirkel.", icon: "üßô‚Äç‚ôÄÔ∏è" },
                { title_id: "Sinshade", title_en: "Sinshade", text_id: "Bayangan memori orang mati yang tertinggal di Enkanomiya.", text_en: "Memory shades of the dead lingering in Enkanomiya.", icon: "üëª" },
                { title_id: "Lautan Gelap", title_en: "Dark Sea", text_id: "Wilayah di luar benua Teyvat tempat dewa-dewa yang kalah melarikan diri.", text_en: "Region outside Teyvat continent where defeated gods fled.", icon: "üåä" },
                { title_id: "Tri-Lakshana", title_en: "Tri-Lakshana", text_id: "Makhluk Sumeru yang berubah wujud saat terkena Electro/Pyro.", text_en: "Sumeru creatures changing state when hit by Electro/Pyro.", icon: "üçÑ" },
                { title_id: "Withering", title_en: "Withering", text_id: "Manifestasi penyakit Irminsul yang mematikan tumbuhan dan hewan.", text_en: "Manifestation of Irminsul's sickness killing flora and fauna.", icon: "ü•Ä" }
            ],

            // == 4. RAMALAN ==
            theories: [
                {
                    title_id: "Columbina & Tiga Bulan", title_en: "Columbina & Three Moons",
                    desc_id: "Columbina adalah pewaris Sonnet (Bulan Beku). Dottore mencoba memanen Aria.",
                    desc_en: "Columbina is the heir of Sonnet (Frozen Moon). Dottore attempts to harvest Aria.",
                    tag: "Canon Lore", icon: "üïäÔ∏è"
                },
                {
                    title_id: "Project Stuzha", title_en: "Project Stuzha",
                    desc_id: "Rencana Tsaritsa membakar takdir lama dengan Gnosis.",
                    desc_en: "Tsaritsa's plan to burn the old fate using Gnosis.",
                    tag: "Endgame", icon: "‚ôüÔ∏è"
                },
                {
                    title_id: "Bulan Palsu Dottore", title_en: "Dottore's Fake Moon",
                    desc_id: "Dottore membangun bulan mekanis untuk menangkap dewa.",
                    desc_en: "Dottore builds a mechanical moon to capture a god.",
                    tag: "Plot 6.2", icon: "‚öôÔ∏è"
                },
                {
                    title_id: "Durin Manusia", title_en: "Human Durin",
                    desc_id: "Durin terlahir kembali sebagai manusia berhati murni.",
                    desc_en: "Durin is reborn as a pure-hearted human.",
                    tag: "Redemption", icon: "üêâ"
                }
            ]
        };

        // --- APP LOGIC ---
        const app = {

        openMobileSearch() {
            document.getElementById('mobile-search')?.classList.remove('hidden');
            setTimeout(() => {
                document.getElementById('mobile-search-input')?.focus();
            }, 100);
        },

        closeMobileSearch() {
            document.getElementById('mobile-search')?.classList.add('hidden');
        },

            search(query) {
            const keyword = query.toLowerCase();
            const results = [];
            const isId = this.lang === 'id';

            // 1. CARI DI TIMELINE (Termasuk Detail Points!)
            loreData.timeline.forEach(item => {
                const title = isId ? item.era_id : item.era_en;
                const desc = isId ? item.desc_id : item.desc_en;
                const details = isId ? item.details_id : item.details_en;
                
                // Cek judul, deskripsi, DAN isi detail
                const matchTitle = title.toLowerCase().includes(keyword);
                const matchDesc = desc.toLowerCase().includes(keyword);
                const matchDetail = details.some(d => d.toLowerCase().includes(keyword));

                if (matchTitle || matchDesc || matchDetail) {
                    results.push({
                        type: isId ? 'Kronologi' : 'Timeline',
                        icon: item.icon,
                        title: title,
                        desc: desc // Tampilkan deskripsi utama saja di hasil
                    });
                }
            });

            // 2. CARI DI WILAYAH & FAKSI
            loreData.nations.forEach(item => {
                const id = item.id;
                const desc = isId ? item.desc_id : item.desc_en;
                const leader = isId ? item.leader_id : item.leader_en;

                if (
                    id.toLowerCase().includes(keyword) || 
                    desc.toLowerCase().includes(keyword) ||
                    leader.toLowerCase().includes(keyword)
                ) {
                    results.push({
                        type: isId ? 'Wilayah/Faksi' : 'Nation/Faction',
                        icon: item.icon,
                        title: item.id,
                        desc: desc
                    });
                }
            });

            // 3. CARI DI PUSTAKA (LIBRARY) - Baru!
            if (loreData.library) {
                loreData.library.forEach(item => {
                    const title = isId ? item.title_id : item.title_en;
                    const desc = isId ? item.desc_id : item.desc_en;
                    
                    if (
                        title.toLowerCase().includes(keyword) ||
                        desc.toLowerCase().includes(keyword)
                    ) {
                        results.push({
                            type: isId ? 'Pustaka' : 'Library',
                            icon: item.icon,
                            title: title,
                            desc: desc
                        });
                    }
                });
            }

            // 4. CARI DI TEORI
            loreData.theories.forEach(item => {
                const title = isId ? item.title_id : item.title_en;
                const desc = isId ? item.desc_id : item.desc_en;

                if (
                    title.toLowerCase().includes(keyword) ||
                    desc.toLowerCase().includes(keyword)
                ) {
                    results.push({
                        type: isId ? 'Ramalan' : 'Prophecy',
                        icon: item.icon,
                        title: title,
                        desc: desc
                    });
                }
            });

            this.renderSearchResults(query, results);
        },

            savePref: function() {
                localStorage.setItem(PREF_KEY, JSON.stringify({
                    theme: this.theme,
                    lang: this.lang
                }));
            },

            lang: 'id',
            theme: 'dark',
            view: 'home',


            init: function() {

                // --- BACK TO TOP LOGIC ---
                const backToTopBtn = document.getElementById('back-to-top');
                
                window.addEventListener('scroll', () => {
                    if (window.scrollY > 300) { // Muncul setelah scroll 300px
                        backToTopBtn.classList.remove('opacity-0', 'translate-y-10', 'pointer-events-none');
                    } else { // Sembunyi jika di atas
                        backToTopBtn.classList.add('opacity-0', 'translate-y-10', 'pointer-events-none');
                    }
                });

                // load saved preference
                const saved = JSON.parse(localStorage.getItem(PREF_KEY) || '{}');

                this.theme = saved.theme || 'dark';
                this.lang = saved.lang || 'id';
                
                 // --- APPLY SAVED LANGUAGE UI (Start) ---
                const isId = this.lang === 'id';
                const uiText = {
                    ph: isId ? "Cari di Irminsul..." : "Search Irminsul...",
                    btn: isId ? "Cari" : "Search",
                    help: isId ? "Tekan tombol Cari atau Enter" : "Press Search or Enter"
                };
                
                document.getElementById('simple-search').placeholder = uiText.ph;
                document.getElementById('mobile-search-input').placeholder = uiText.ph;
                document.getElementById('mobile-search-btn').innerText = uiText.btn;
                document.getElementById('mobile-help-text').innerText = uiText.help;
                // --- APPLY SAVED LANGUAGE UI (End) ---

                this.applyTheme();
                document.getElementById('lang-indicator').innerText = this.lang.toUpperCase();

                // sync disclaimer language on load
                document.getElementById('disclaimer-id')?.classList.toggle('hidden', this.lang !== 'id');
                document.getElementById('disclaimer-en')?.classList.toggle('hidden', this.lang !== 'en');

                this.nav('home'); // Ubah default view ke Home

                // --- PERBAIKAN SEARCH MOBILE (Start) ---
                const mobileInput = document.getElementById('mobile-search-input');
                const mobileBtn = document.getElementById('mobile-search-btn');

                if (mobileInput && mobileBtn) {
                    // Fungsi eksekusi pencarian agar tidak berulang
                    const runSearch = () => {
                        const query = mobileInput.value.trim();
                        if (query) {
                            this.closeMobileSearch();
                            this.search(query);
                            mobileInput.blur(); // Menutup keyboard HP otomatis
                        }
                    };

                    // 1. Listener untuk Tombol "Cari"
                    mobileBtn.addEventListener('click', runSearch);

                    // 2. Listener untuk Tombol Enter di Keyboard HP
                    mobileInput.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter') {
                            e.preventDefault(); // Mencegah reload form
                            runSearch();
                        }
                    });
                }
                // --- PERBAIKAN SEARCH MOBILE (End) ---
          
                // --- GENERATE ATMOSPHERIC PARTICLES ---
                const particleContainer = document.getElementById('particles-container');
                const particleCount = 100; // Jumlah partikel (jangan kebanyakan biar ringan)

                for (let i = 0; i < particleCount; i++) {
                    const p = document.createElement('div');
                    p.classList.add('particle');
                    
                    // Randomize Properties
                    const size = Math.random() * 8 + 2; // Ukuran 2px - 10px
                    const posX = Math.random() * 100;   // Posisi horizontal 0% - 100%
                    const duration = Math.random() * 40 + 20; // Durasi 10s - 25s (Pelan)
                    const delay = Math.random() * 20;   // Delay biar gak muncul barengan
                    
                    p.style.width = `${size}px`;
                    p.style.height = `${size}px`;
                    p.style.left = `${posX}%`;
                    p.style.animationDuration = `${duration}s`;
                    p.style.animationDelay = `-${delay}s`; // Negatif biar langsung ada yang di tengah layar
                    
                    particleContainer.appendChild(p);
                }

            },

            
            toggleTheme: function() {
                this.theme = this.theme === 'light' ? 'dark' : 'light';
                this.applyTheme();
                this.savePref();
            },

            applyTheme: function() {
                document.documentElement.classList.toggle('dark', this.theme === 'dark');
                document.getElementById('theme-icon').innerText = this.theme === 'dark' ? '‚òÄ' : '‚òæ';
            },

            toggleLang: function() {
                this.lang = this.lang === 'id' ? 'en' : 'id';

                // --- TRANSLATE STATIC UI (Start) ---
                const isId = this.lang === 'id';
                const uiText = {
                    ph: isId ? "Cari di Irminsul..." : "Search Irminsul...",
                    btn: isId ? "Cari" : "Search",
                    help: isId ? "Tekan tombol Cari atau Enter" : "Press Search or Enter"
                };
                
                // 1. Update Placeholder Desktop & Mobile
                document.getElementById('simple-search').placeholder = uiText.ph;
                document.getElementById('mobile-search-input').placeholder = uiText.ph;
                
                // 2. Update Tombol & Teks Mobile
                document.getElementById('mobile-search-btn').innerText = uiText.btn;
                document.getElementById('mobile-help-text').innerText = uiText.help;
                // --- TRANSLATE STATIC UI (End) ---

                document.getElementById('lang-indicator').innerText = this.lang.toUpperCase();

                // === Update Disclaimer Language ===
                document.getElementById('disclaimer-id')?.classList.toggle('hidden', this.lang !== 'id');
                document.getElementById('disclaimer-en')?.classList.toggle('hidden', this.lang !== 'en');

                this.nav(this.view);
                this.savePref();
            },


            toggleCard: function(index) {
                const content = document.getElementById(`timeline-detail-${index}`);
                const btn = document.getElementById(`timeline-btn-${index}`);
                const node = document.getElementById(`node-${index}`); 
                const dict = db[this.lang].ui;
                
                // Cek state sebelum direset
                const willOpen = !content.classList.contains('open');

                // 1. Tutup SEMUA dulu (Reset total)
                document.querySelectorAll('.expandable-content').forEach(el => el.classList.remove('open'));
                document.querySelectorAll('.expandable-btn').forEach(el => el.innerText = dict.read_more);
                document.querySelectorAll('.timeline-node').forEach(el => el.classList.remove('active')); 

                // 2. Buka HANYA yang diklik
                if (willOpen) {
                    content.classList.add('open');
                    btn.innerText = dict.collapse;
                    if(node) node.classList.add('active'); // Nyalakan Node
                }
            },

            nav: function(target) {
                window.scrollTo({ top: 0, behavior: 'smooth' });
                this.view = target;
                const dict = db[this.lang];
                
                // 1. Update Judul Halaman
                document.getElementById('page-title').innerText = dict.titles[target];
                document.getElementById('page-subtitle').innerText = dict.subtitles[target];

                // 2. LOGIKA DESKTOP NAV (Highlight Tombol Atas)
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    const id = btn.getAttribute('data-id');
                    const isRamalan = id.includes('theories');
                    
                    // Reset class dasar
                    btn.className = "nav-btn px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-widest transition-all duration-300";

                    if(id.includes(target)) {
                        // Jika Aktif
                        if (isRamalan) {
                             btn.classList.add('bg-lore-mystery', 'text-white', 'shadow-md', 'hover:bg-lore-mysteryHover'); 
                        } else {
                             btn.classList.add('bg-lore-gold', 'text-white', 'shadow-md');
                        }
                    } else {
                        // Jika Tidak Aktif
                        if (isRamalan) {
                             btn.classList.add('text-indigo-600', 'dark:text-indigo-400', 'hover:bg-indigo-50', 'dark:hover:bg-indigo-900/30'); 
                        } else {
                             btn.classList.add('text-gray-600', 'dark:text-gray-300', 'hover:bg-white/50', 'dark:hover:bg-white/10', 'hover:text-lore-gold');
                        }
                    }
                });

                // 3. LOGIKA MOBILE NAV (PERFECT FIT EDITION)
                // Reset semua tombol: Hapus scale, atur base class
                document.querySelectorAll('.mobile-nav-btn').forEach(btn => {
                    // Class Standar (Mati)
                    btn.className = "mobile-nav-btn flex flex-col items-center justify-center w-full h-full text-gray-500 transition-all duration-300 rounded-xl hover:bg-black/5 dark:hover:bg-white/5";
                });

                // Cari tombol yang harus AKTIF
                const activeMobileBtn = document.getElementById(`mobile-nav-${target}`);
                
                if (activeMobileBtn) {
                    // Hapus text abu-abu
                    activeMobileBtn.classList.remove('text-gray-500', 'hover:bg-black/5', 'dark:hover:bg-white/5');
                    
                    // Tambahkan Font Bold
                    activeMobileBtn.classList.add('font-bold'); 

                    // Cek Warna: Ungu untuk Ramalan, Emas untuk sisanya
                    if (target === 'theories') {
                        // EFEK GLOW UNGU
                        activeMobileBtn.classList.add(
                            'text-indigo-400',          
                            'bg-indigo-900/40',         // Background lebih gelap
                            'border', 'border-indigo-500/30', // Border halus
                            'shadow-[inset_0_0_10px_rgba(129,140,248,0.2)]' // Glow DALAM (Inset) agar sudut tetap tajam
                        );
                    } else {
                        // EFEK GLOW EMAS
                        activeMobileBtn.classList.add(
                            'text-lore-gold',           
                            'bg-lore-gold/10',          
                            'border', 'border-lore-gold/30',      
                            'shadow-[inset_0_0_10px_rgba(198,166,104,0.15)]' // Glow DALAM (Inset)
                        );
                    }
                }

                // 4. Render Konten
                const container = document.getElementById('app-content');
                container.innerHTML = '';
                
                if (target === 'home') this.renderHome(container); // <--- TAMBAHAN PENTING
                else if (target === 'timeline') this.renderTimeline(container);
                else if (target === 'nations') this.renderNations(container);
                else if (target === 'library') this.renderLibrary(container);
                else if (target === 'cosmology') this.renderCosmology(container);
                else if (target === 'theories') this.renderTheories(container);
            
                // Tandai nav desktop (fallback)
                document.querySelector(`[data-id="nav_${target}"]`)?.classList.add('active');
            },
            
            

renderTimeline: function(container) {
                const data = loreData.timeline;
                const ui = db[this.lang].ui;

                let html = `
                <div class="max-w-4xl mx-auto mt-4"> `; 

                data.forEach((item, idx) => {
                    const era = this.lang === 'id' ? item.era_id : item.era_en;
                    const desc = this.lang === 'id' ? item.desc_id : item.desc_en;
                    const details = this.lang === 'id' ? item.details_id : item.details_en;
                    const isTraveler = item.era_id.includes('Traveler');
                    
                    let borderClass = 'border-thick-gold border-l-lore-gold'; 
                    if (isTraveler) borderClass = 'border-thick-accent border-l-lore-accent';

                    html += `
                        <div class="timeline-item">
                            <div class="timeline-connector"></div>
                            
                            <div id="node-${idx}" class="timeline-node"></div>
                            
                            <div class="glass rounded-xl overflow-hidden border-l-4 ${borderClass}">
                                <div class="card-watermark">${item.icon}</div>
                                
                                <div class="p-6 relative z-10 cursor-pointer hover:bg-black/5 dark:hover:bg-white/5 transition-colors" onclick="app.toggleCard(${idx})">
                                    <div class="flex justify-between items-start mb-2">
                                        <h3 class="text-xl font-serif font-bold text-gray-800 dark:text-lore-gold">${era}</h3>
                                        <span class="text-xs font-bold text-white bg-lore-goldDim px-2 py-1 rounded shadow-sm">${item.year}</span>
                                    </div>
                                    <p class="text-gray-600 dark:text-gray-300 text-sm mb-4 leading-relaxed">${desc}</p>
                                    <button id="timeline-btn-${idx}" class="expandable-btn text-xs font-bold uppercase tracking-widest text-lore-accent hover:text-lore-gold transition-colors">${ui.read_more}</button>
                                </div>
                                
                                <div id="timeline-detail-${idx}" class="expandable-content bg-white/50 dark:bg-black/20 relative z-10">
                                    <ul class="p-6 pt-0 space-y-3 text-sm text-gray-700 dark:text-gray-400">
                                        <div class="h-[1px] w-full bg-lore-gold/20 mb-4"></div>
                                        ${details.map(d => `<li class="leading-relaxed pl-4 border-l-2 border-lore-gold/30">${d.replace(/\*\*(.*?)\*\*/g, '<strong class="text-gray-900 dark:text-gray-200 block mb-1">$1</strong>')}</li>`).join('')}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    `;
                });
                html += `</div>`;
                container.innerHTML = html;
            },

            // --- FUNGSI RENDER WILAYAH & FAKSI (UPDATED FILTER) ---
            renderNations: function(container) {
                const ui = db[this.lang].ui;
                
                // 1. DAFTAR ID KHUSUS (Agar tidak masuk ke 7 Bangsa Utama)
                const specialRegionIDs = [
                    'Nod Krai', 'Khaenri\'ah', 'Vishap Realm', 
                    'Enkanomiya', 'Remuria', 'Sal Vindagnyr', 
                    'The Dark Sea', 'Mare Jivari'
                ];
                
                const factionIDs = [
                    'Hexenzirkel', 'The Wild Hunt', 'Frostmoon Scions', 'Celestia', 
                    'Fatui Harbingers', 'Abyss Order', 'Narzissenkreuz Ordo', 
                    'Temple of Silence', 'Adventurers\' Guild', 'The Adepti', 
                    'House of the Hearth', 'The Eremites', 'Shuumatsuban', 'Spina di Rosula'
                ];
                
                // 2. Filter Data menjadi 3 Kelompok
                const allData = loreData.nations;
                
                const mainNations = allData.filter(item => 
                    !specialRegionIDs.includes(item.id) && !factionIDs.includes(item.id)
                );
                
                const specialRegions = allData.filter(item => 
                    specialRegionIDs.includes(item.id)
                );
                
                const factions = allData.filter(item => 
                    factionIDs.includes(item.id)
                );

                // 3. Helper Pembuat Kartu
                const createCard = (nation, idx) => {
                    const desc = this.lang === 'id' ? nation.desc_id : nation.desc_en;
                    const leader = this.lang === 'id' ? nation.leader_id : nation.leader_en;
                    
                    let borderColor = 'text-gray-500'; 
                    if (['pyro','geo','anemo','dendro','hydro','electro','cryo'].includes(nation.el)) borderColor = `text-el-${nation.el}`;
                    else if (nation.el === 'mystery') borderColor = 'text-lore-mystery';
                    else if (nation.el === 'void') borderColor = 'text-gray-400';
                    else if (nation.el === 'lunar') borderColor = 'text-lore-gold';
                    else if (nation.el === 'abyss') borderColor = 'text-indigo-400';

                    return `
                        <div class="glass nation-card rounded-xl p-6 relative group duration-300 animate-enter" style="animation-delay: ${idx * 0.05}s">
                            <div class="card-watermark">${nation.icon}</div>
                            <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-current to-transparent opacity-50 text-el-${nation.el} group-hover:h-1.5 transition-all"></div>
                            
                            <div class="flex justify-between items-center mb-4 relative z-10">
                                <span class="text-3xl filter drop-shadow-lg transform group-hover:scale-110 transition-transform">${nation.icon}</span>
                                <span class="text-[0.6rem] font-bold uppercase tracking-widest text-gray-400 bg-black/5 dark:bg-white/10 px-2 py-1 rounded shadow-sm border border-white/5">${nation.el}</span>
                            </div>
                            
                            <h3 class="text-xl md:text-2xl font-serif font-bold mb-2 text-el-${nation.el} relative z-10 ${nation.el === 'mystery' ? 'text-lore-mystery' : ''}">${nation.id}</h3>
                            <p class="text-xs text-gray-600 dark:text-gray-400 mb-6 min-h-[40px] relative z-10 leading-relaxed">${desc}</p>
                            
                            <div class="space-y-3 text-sm border-t border-gray-200 dark:border-white/10 pt-4 relative z-10">
                                <div class="flex justify-between items-center">
                                    <span class="text-[0.6rem] uppercase text-gray-500 dark:text-gray-500 font-bold tracking-wider">${ui.leader}</span>
                                    <span class="font-bold text-gray-800 dark:text-gray-200 text-xs text-right truncate ml-2 max-w-[60%]">${leader}</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-[0.6rem] uppercase text-gray-500 dark:text-gray-500 font-bold tracking-wider">${ui.archon}</span>
                                    <span class="text-xs text-right text-lore-goldDim font-semibold">${nation.archon}</span>
                                </div>
                            </div>
                        </div>
                    `;
                };

                // 4. Susun HTML dengan Divider
                let html = '';

                // --- SECTION 1: TUJUH BANGSA ---
                const titleMain = this.lang === 'id' ? "Tujuh Bangsa Teyvat" : "The Seven Nations";
                html += `
                    <div class="flex items-center justify-center gap-4 mb-8">
                        <span class="h-[1px] w-8 bg-lore-gold/50"></span>
                        <h2 class="text-xl md:text-2xl font-serif font-bold text-transparent bg-clip-text bg-gradient-to-r from-lore-goldDim to-lore-gold text-center uppercase tracking-widest">${titleMain}</h2>
                        <span class="h-[1px] w-8 bg-lore-gold/50"></span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
                        ${mainNations.map((n, i) => createCard(n, i)).join('')}
                    </div>
                `;

                // --- SECTION 2: WILAYAH KHUSUS (ANCIENT) ---
                if (specialRegions.length > 0) {
                    const titleSpecial = this.lang === 'id' ? "Wilayah Kuno & Terlarang" : "Ancient & Forbidden Regions";
                    html += `
                        <div class="royal-divider my-8 opacity-50"></div>
                        <div class="flex items-center justify-center gap-4 mb-8">
                            <span class="h-[1px] w-8 bg-red-900/40 dark:bg-red-500/40"></span>
                            <h2 class="text-xl md:text-2xl font-serif font-bold text-transparent bg-clip-text bg-gradient-to-r from-red-800 to-red-600 dark:from-red-400 dark:to-red-600 text-center uppercase tracking-widest">${titleSpecial}</h2>
                            <span class="h-[1px] w-8 bg-red-900/40 dark:bg-red-500/40"></span>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
                            ${specialRegions.map((n, i) => createCard(n, i + mainNations.length)).join('')}
                        </div>
                    `;
                }

                // --- SECTION 3: FAKSI ---
                if (factions.length > 0) {
                    const titleFaction = this.lang === 'id' ? "Organisasi & Faksi" : "Organizations & Factions";
                    html += `
                        <div class="royal-divider my-8 opacity-50"></div>
                        <div class="flex items-center justify-center gap-4 mb-8">
                            <span class="h-[1px] w-8 bg-indigo-500/50"></span>
                            <h2 class="text-xl md:text-2xl font-serif font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-indigo-600 text-center uppercase tracking-widest">${titleFaction}</h2>
                            <span class="h-[1px] w-8 bg-indigo-500/50"></span>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            ${factions.map((n, i) => createCard(n, i + mainNations.length + specialRegions.length)).join('')}
                        </div>
                    `;
                }

                container.innerHTML = html;
            },

            renderCosmology: function(container) {
                
                let html = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 animate-enter">
                `;
                
                loreData.cosmology.forEach((c, idx) => {
                    const title = this.lang === 'id' ? c.title_id : c.title_en;
                    const text = this.lang === 'id' ? c.text_id : c.text_en;
                    
                    html += `
                        <div class="glass p-8 rounded-xl border-l-4 border-thick-dim border-lore-goldDim relative group hover:bg-white/40 dark:hover:bg-white/5 transition-colors" style="animation-delay: ${idx * 0.05}s">
                            <div class="card-watermark">${c.icon}</div>
                            <h3 class="text-xl font-serif font-bold text-lore-gold mb-3 relative z-10">${title}</h3>
                            <p class="text-gray-700 dark:text-gray-300 leading-relaxed text-sm relative z-10">${text}</p>
                        </div>
                    `;
                });
                
                html += `</div>`;
                container.innerHTML = html;
            },

            // --- FUNGSI RENDER PUSTAKA (BARU) ---
            renderLibrary: function(container) {
                let html = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 animate-enter">
                `;
                
                loreData.library.forEach((item, idx) => {
                    const title = this.lang === 'id' ? item.title_id : item.title_en;
                    const desc = this.lang === 'id' ? item.desc_id : item.desc_en;
                    
                    html += `
                        <div class="glass p-5 rounded-lg border-l-4 border-lore-gold hover:bg-white/40 dark:hover:bg-white/5 transition-all group cursor-default" style="animation-delay: ${idx * 0.05}s">
                            <div class="flex items-start gap-4">
                                <div class="w-10 h-10 rounded-full bg-lore-gold/10 flex items-center justify-center text-2xl shadow-sm group-hover:scale-110 transition-transform">
                                    ${item.icon}
                                </div>
                                <div>
                                    <span class="text-[0.6rem] font-bold uppercase tracking-wider text-lore-goldDim mb-1 block">${item.type}</span>
                                    <h3 class="text-lg font-serif font-bold text-gray-800 dark:text-lore-gold leading-tight mb-2">${title}</h3>
                                    <p class="text-xs text-gray-600 dark:text-gray-300 leading-relaxed">${desc}</p>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                html += `</div>`;
                container.innerHTML = html;
            },
            // -------------------------------------
// --- FUNGSI RENDER HOME (DASHBOARD) ---
            renderHome: function(container) {
                const ui = db[this.lang].ui;
                const isId = this.lang === 'id';
                
                // Hitung Statistik Data Otomatis
                const stats = {
                    timeline: loreData.timeline.length,
                    nations: loreData.nations.length,
                    library: loreData.library ? loreData.library.length : 0,
                    theories: loreData.theories.length
                };

                let html = `
                <div class="animate-enter space-y-8 max-w-4xl mx-auto">
                    
                    <div class="text-center py-10">
                        <div class="inline-block p-4 rounded-full bg-lore-gold/10 mb-4 ring-1 ring-lore-gold/50 shadow-[0_0_20px_rgba(198,166,104,0.3)]">
                            <span class="text-4xl">üå≥</span>
                        </div>
                        <h2 class="text-3xl md:text-5xl font-serif font-bold text-transparent bg-clip-text bg-gradient-to-r from-lore-goldDim via-lore-gold to-lore-goldDim mb-4">
                            ${isId ? 'Irminsul: Record of Tevyat' : 'Irminsul: Record of Tevyat'}
                        </h2>
                        <p id="typewriter-text" class="text-gray-600 dark:text-gray-400 font-mono text-sm h-6">
                            </p>
                    </div>

                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="glass p-4 rounded-xl text-center border-t-2 border-lore-gold">
                            <div class="text-2xl mb-1">‚è≥</div>
                            <div class="text-2xl font-bold text-gray-800 dark:text-white">${stats.timeline}</div>
                            <div class="text-[0.6rem] uppercase tracking-widest text-gray-500">
                                ${isId ? 'Era Tercatat' : 'Eras Recorded'}
                            </div>
                        </div>
                        <div class="glass p-4 rounded-xl text-center border-t-2 border-el-anemo">
                            <div class="text-2xl mb-1">üåç</div>
                            <div class="text-2xl font-bold text-gray-800 dark:text-white">${stats.nations}</div>
                            <div class="text-[0.6rem] uppercase tracking-widest text-gray-500">
                                ${isId ? 'Entitas Politik' : 'Political Entities'}
                            </div>
                        </div>
                        <div class="glass p-4 rounded-xl text-center border-t-2 border-lore-mystery">
                            <div class="text-2xl mb-1">üìö</div>
                            <div class="text-2xl font-bold text-gray-800 dark:text-white">${stats.library}</div>
                            <div class="text-[0.6rem] uppercase tracking-widest text-gray-500">
                                ${isId ? 'Arsip Terlarang' : 'Forbidden Archives'}
                            </div>
                        </div>
                        <div class="glass p-4 rounded-xl text-center border-t-2 border-red-500">
                            <div class="text-2xl mb-1">‚ö°</div>
                            <div class="text-lore-gold font-bold text-sm mt-1">STABLE</div>
                            <div class="text-[0.6rem] uppercase tracking-widest text-gray-500 mt-1">
                                ${isId ? 'Status Ley Line' : 'Ley Line Status'}
                            </div>
                        </div>
                    </div>

                    <div class="glass p-8 rounded-xl border border-white/10 relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-4 opacity-10 text-6xl rotate-12">‚ùÑÔ∏è</div>
                        <h3 class="text-xl font-serif font-bold text-lore-gold mb-2">
                            ${isId ? 'Pembaruan Terakhir: Versi 6.2' : 'Latest Patch: Version 6.2'}
                        </h3>
                        <p class="text-sm text-gray-600 dark:text-gray-300 mb-4 max-w-lg leading-relaxed">
                            ${isId 
                                ? 'Data mengenai <strong>Nod-Krai</strong>, <strong>Columbina (Kuutar)</strong>, dan <strong>Project Stuzha</strong> telah ditambahkan ke dalam database. Akses Kronologi untuk detail lengkap.' 
                                : 'Data regarding <strong>Nod-Krai</strong>, <strong>Columbina (Kuutar)</strong>, and <strong>Project Stuzha</strong> has been added. Access Timeline for full details.'}
                        </p>
                        <button onclick="app.nav('timeline')" class="px-6 py-2 bg-lore-gold text-white rounded-lg text-xs font-bold uppercase tracking-widest hover:bg-[#8A7342] transition-colors shadow-lg">
                            ${isId ? 'Akses Data' : 'Access Data'}
                        </button>
                    </div>

                </div>`;
                
                container.innerHTML = html;

                // Efek Mengetik (Typewriter Effect)
                const txt = isId 
                    ? "Menghubungkan ke kesadaran dunia... Akses diberikan." 
                    : "Connecting to world consciousness... Access granted.";
                let i = 0;
                const speed = 30; 
                const targetEl = document.getElementById("typewriter-text");
                
                if(targetEl) {
                    targetEl.innerHTML = ""; // Reset
                    function typeWriter() {
                        if (i < txt.length) {
                            targetEl.innerHTML += txt.charAt(i);
                            i++;
                            setTimeout(typeWriter, speed);
                        }
                    }
                    typeWriter();
                }
            },

            // --- FUNGSI RENDER HOME (DASHBOARD) ---
            renderHome: function(container) {
                const ui = db[this.lang].ui;
                const isId = this.lang === 'id';
                
                // Hitung Statistik Data Otomatis
                const stats = {
                    timeline: loreData.timeline.length,
                    nations: loreData.nations.length,
                    library: loreData.library ? loreData.library.length : 0,
                    theories: loreData.theories.length
                };

                let html = `
                <div class="animate-enter space-y-8 max-w-4xl mx-auto">
                    
                    <div class="text-center py-10">
                        <div class="inline-block p-4 rounded-full bg-lore-gold/10 mb-4 ring-1 ring-lore-gold/50 shadow-[0_0_20px_rgba(198,166,104,0.3)]">
                            <span class="text-4xl">üå≥</span>
                        </div>
                        <h2 class="text-3xl md:text-5xl font-serif font-bold text-transparent bg-clip-text bg-gradient-to-r from-lore-goldDim via-lore-gold to-lore-goldDim mb-4">
                            ${isId ? 'Irminsul: Record of Tevyat' : 'Irminsul: Record of Tevyat'}
                        </h2>
                        <p id="typewriter-text" class="text-gray-600 dark:text-gray-400 font-mono text-sm h-6">
                            </p>
                    </div>

                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="glass p-4 rounded-xl text-center border-t-2 border-lore-gold">
                            <div class="text-2xl mb-1">‚è≥</div>
                            <div class="text-2xl font-bold text-gray-800 dark:text-white">${stats.timeline}</div>
                            <div class="text-[0.6rem] uppercase tracking-widest text-gray-500">
                                ${isId ? 'Era Tercatat' : 'Eras Recorded'}
                            </div>
                        </div>
                        <div class="glass p-4 rounded-xl text-center border-t-2 border-el-anemo">
                            <div class="text-2xl mb-1">üåç</div>
                            <div class="text-2xl font-bold text-gray-800 dark:text-white">${stats.nations}</div>
                            <div class="text-[0.6rem] uppercase tracking-widest text-gray-500">
                                ${isId ? 'Entitas Politik' : 'Political Entities'}
                            </div>
                        </div>
                        <div class="glass p-4 rounded-xl text-center border-t-2 border-lore-mystery">
                            <div class="text-2xl mb-1">üìö</div>
                            <div class="text-2xl font-bold text-gray-800 dark:text-white">${stats.library}</div>
                            <div class="text-[0.6rem] uppercase tracking-widest text-gray-500">
                                ${isId ? 'Arsip Terlarang' : 'Forbidden Archives'}
                            </div>
                        </div>
                        <div class="glass p-4 rounded-xl text-center border-t-2 border-red-500">
                            <div class="text-2xl mb-1">‚ö°</div>
                            <div class="text-lore-gold font-bold text-sm mt-1">STABLE</div>
                            <div class="text-[0.6rem] uppercase tracking-widest text-gray-500 mt-1">
                                ${isId ? 'Status Ley Line' : 'Ley Line Status'}
                            </div>
                        </div>
                    </div>

                    <div class="glass p-8 rounded-xl border border-white/10 relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-4 opacity-10 text-6xl rotate-12">‚ùÑÔ∏è</div>
                        <h3 class="text-xl font-serif font-bold text-lore-gold mb-2">
                            ${isId ? 'Pembaruan Terakhir: Versi 6.2' : 'Latest Patch: Version 6.2'}
                        </h3>
                        <p class="text-sm text-gray-600 dark:text-gray-300 mb-4 max-w-lg leading-relaxed">
                            ${isId 
                                ? 'Data mengenai <strong>Nod-Krai</strong>, <strong>Columbina (Kuutar)</strong>, dan <strong>Project Stuzha</strong> telah ditambahkan ke dalam database. Akses Kronologi untuk detail lengkap.' 
                                : 'Data regarding <strong>Nod-Krai</strong>, <strong>Columbina (Kuutar)</strong>, and <strong>Project Stuzha</strong> has been added. Access Timeline for full details.'}
                        </p>
                        <button onclick="app.nav('timeline')" class="px-6 py-2 bg-lore-gold text-white rounded-lg text-xs font-bold uppercase tracking-widest hover:bg-[#8A7342] transition-colors shadow-lg">
                            ${isId ? 'Akses Data' : 'Access Data'}
                        </button>
                    </div>

                </div>`;
                
                container.innerHTML = html;

                // Efek Mengetik (Typewriter Effect)
                const txt = isId 
                    ? "Menghubungkan ke kesadaran dunia... Akses diberikan." 
                    : "Connecting to world consciousness... Access granted.";
                let i = 0;
                const speed = 30; 
                const targetEl = document.getElementById("typewriter-text");
                
                if(targetEl) {
                    targetEl.innerHTML = ""; // Reset
                    function typeWriter() {
                        if (i < txt.length) {
                            targetEl.innerHTML += txt.charAt(i);
                            i++;
                            setTimeout(typeWriter, speed);
                        }
                    }
                    typeWriter();
                }
            },

            renderTheories: function(container) {
                const ui = db[this.lang].ui;

                let html = `
                <div class="max-w-4xl mx-auto space-y-6 animate-enter">
                `;
                
                html += `
                    <div class="p-4 mb-6 rounded-lg bg-red-100 dark:bg-red-900/30 border border-red-500/50 text-red-600 dark:text-red-400 text-sm font-bold text-center animate-enter shadow-inner flex items-center justify-center gap-2">
                        <span>‚ö†</span> ${ui.warning} <span>‚ö†</span>
                    </div>
                `;

                loreData.theories.forEach((t, idx) => {
                    const title = this.lang === 'id' ? t.title_id : t.title_en;
                    const desc = this.lang === 'id' ? t.desc_id : t.desc_en;
                    
                    html += `
                        <div class="glass p-8 rounded-2xl relative overflow-hidden group border-b-4 border-bottom-mystery border-indigo-500 transition-all hover:shadow-xl hover:-translate-y-1" style="animation-delay: ${idx * 0.1}s">
                            <div class="card-watermark">${t.icon}</div>
                            <div class="relative z-10">
                                <span class="inline-block px-3 py-1 text-[0.6rem] font-bold uppercase tracking-widest text-white bg-indigo-500 rounded-full mb-3 shadow-md">${t.tag}</span>
                                <h3 class="text-2xl font-serif font-bold text-gray-800 dark:text-gray-100 mb-4 group-hover:text-indigo-500 transition-colors">${title}</h3>
                                <p class="text-base text-gray-600 dark:text-gray-300 leading-relaxed">${desc}</p>
                            </div>
                        </div>
                    `;
                });
                html += `</div>`;
                container.innerHTML = html;
            },

            highlight(text, query) {
                if (!query) return text;

                const escaped = query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                const regex = new RegExp(`(${escaped})`, 'gi');

                return text.replace(
                    regex,
                    `<mark class="bg-lore-gold/30 text-lore-gold font-semibold px-1 rounded">$1</mark>`
                );
            },

            renderSearchResults(query, results) {
                const container = document.getElementById('app-content');

                this.view = 'search';

                document.getElementById('page-title').innerText =
                    this.lang === 'id' ? 'Hasil Pencarian' : 'Search Results';

                document.getElementById('page-subtitle').innerText = `"${query}"`;

                if (!results.length) {
                    container.innerHTML = `
                        <div class="text-center py-20 text-gray-500 dark:text-gray-400">
                            ${this.lang === 'id'
                                ? 'Data tidak ditemukan di Irminsul.'
                                : 'No records found in Irminsul.'}
                        </div>
                    `;
                    return;
                }

                let html = `
                    <div class="space-y-4 max-w-4xl mx-auto">
                `;

                results.forEach((r, i) => {
                    html += `
                        <div class="glass p-4 rounded-xl border-l-4 border-lore-gold animate-enter"
                            style="animation-delay:${i * 0.05}s">
                            <div class="flex gap-3">
                                <span class="text-2xl">${r.icon}</span>
                                <div>
                                    <span class="text-[0.6rem] uppercase font-bold text-gray-400">
                                        ${r.type}
                                    </span>
                                    <h3 class="font-serif font-bold text-lore-gold">
                                        ${this.highlight(r.title, query)}
                                    </h3>
                                    <p class="text-xs text-gray-600 dark:text-gray-300">
                                        ${this.highlight(r.desc, query)}
                                    </p>
                                </div>
                            </div>
                        </div>
                    `;
                });

                html += `</div>`;
                container.innerHTML = html;
            },
                        
        };
        
        document.addEventListener('DOMContentLoaded', () => app.init());
      
        document.getElementById('simple-search')?.addEventListener('keydown', function(e) {
            if (e.key !== 'Enter') return;

            const query = this.value.trim();
            if (!query) return;

            app.search(query);
        });


    </script>

<!-- FAN-MADE DISCLAIMER (BILINGUAL ‚Äì STABLE) -->
<footer class="mt-16 pb-10 px-4 text-center text-xs text-gray-500 dark:text-gray-400 font-sans">
  <div class="max-w-3xl mx-auto">

    <!-- divider -->
<div class="relative my-4">
  <div class="border-t border-lore-gold/40 transition-colors duration-300 ease-in-out"></div>
  <span class="absolute left-1/2 -translate-x-1/2 -top-2 
               bg-[#F2EFE9] dark:bg-[#0F111A]
               px-2 text-lore-gold text-xs font-serif"
               transition-colors duration-300 ease-in-out>
    IRMINSUL ARCHIVES
  </span>
</div>


    <!-- fixed spacer (INI KUNCINYA) -->
    <div class="h-6"></div>

        <p><strong>Irminsul Archives</strong> ‚Äî Fan-made & Non-Commercial Project.</p>
        <p>Genshin Impact ¬© HoYoverse. Not affiliated with HoYoverse.</p>
        <p class="mt-2 text-lore-goldDim">Curated by <strong>Hanggara</strong></p>
    </footer>

</footer>

<!-- MOBILE SEARCH OVERLAY -->
<div id="mobile-search"
  class="fixed inset-0 z-[999] bg-black/60 backdrop-blur-sm hidden"
  onclick="app.closeMobileSearch()">

  <!-- panel -->
  <div class="absolute left-0 right-0 glass rounded-t-2xl p-4"
       style="bottom: env(safe-area-inset-bottom, 0); transform: translateY(-45vh);"
       onclick="event.stopPropagation()">

    <!-- header -->
    <div class="flex items-center justify-between mb-3">
      <strong class="text-sm text-lore-gold">Search Irminsul</strong>
      <button onclick="app.closeMobileSearch()"
        class="text-sm font-bold text-lore-gold">‚úï</button>
    </div>

    <!-- input -->
    <input
      id="mobile-search-input"
      type="search"
      inputmode="search"
      placeholder="Cari di Irminsul..."
      class="w-full bg-black/5 dark:bg-white/5 
             rounded-full px-4 py-3 text-sm 
             text-gray-800 dark:text-gray-200 outline-none mb-3"
    />

    <!-- search button -->
    <button
      id="mobile-search-btn"
      class="w-full py-2 rounded-full bg-lore-gold text-white font-bold text-sm">
      Cari
    </button>

    <p id="mobile-help-text" class="text-xs text-gray-500 italic mt-2 text-center">
      Tekan tombol Cari atau Enter
    </p>
  </div>
</div>

    <button id="back-to-top" 
            onclick="window.scrollTo({top: 0, behavior: 'smooth'})"
            class="fixed bottom-6 right-6 z-40 w-12 h-12 rounded-full glass 
                   border border-lore-gold/50 text-lore-gold shadow-lg 
                   flex items-center justify-center transition-all duration-300 
                   opacity-0 translate-y-10 pointer-events-none hover:bg-lore-gold hover:text-white group">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 group-hover:-translate-y-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
        </svg>
    </button>

</body>
</html>